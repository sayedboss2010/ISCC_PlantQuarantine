@*@model PagedList.IPagedList<PlantQuar.DTO.DTO.ImPermissionsListDTO>*@

@model List<PlantQuar.DTO.DTO.Import.Permissions.ImPermissionsListDTO>

@*@using PagedList.Mvc;*@

<link href="/Content/PagedList.css" rel="stylesheet" type="text/css" />
@{
    ViewBag.Title = "Im Permissions List";
    Layout = "~/Views/Shared/_LayoutPage1.cshtml";
    var model = Model;
}

@section Title{
    <h2 class="ls-top-header">@PlantQuar.WEB.Language.Resource_data1.ImPermissionsList</h2>
}

@section Path{
    <li style="position: relative;right: 28px;">@PlantQuar.WEB.Language.Resource_data1.check</li>
    <li class="active" style="right: 43px; position: relative;">@PlantQuar.WEB.Language.Resource_data1.ImPermissionsList</li>
}

<style>
    th {
        font-size: 14px !important;
        text-align: center;
    }

    td {
        font-size: 16px !important;
        text-align: center;
        font-family: "Times New Roman", Times, serif !important;
    }

    .status {
        display: inline-block;
        margin: 20px 0px 20px 50px;
    }

    p {
        font-weight: bold;
    }

    #capq blockquote.styles {
        margin-bottom: 70px;
    }

    .btn-secondary {
        background-color: #1fb5ad;
    }

        .btn-secondary:not([disabled]):not(.disabled):active, .btn-secondary:not([disabled]):not(.disabled).active, .show > .btn-secondary.dropdown-toggle {
            color: #fff;
            background-color: #0c6265;
            border-color: #9ec7da;
            box-shadow: inset 0 3px 5px rgba(45, 101, 93, 0.125), 0 0 0 2px rgba(72, 145, 152, 0.5);
        }

        .btn-secondary:hover {
            background-color: #389da0;
            border-color: #7fc7d0;
        }

    .btn-group > .btn, .btn-group-vertical > .btn {
        width: 159px;
    }

    option:focus,
    option:hover {
        outline: none;
    }

    .label-primary {
        background-color: #6dcac2
    }

    option {
        color: #379598 !important;
    }

    .table-bordered tbody tr:nth-child(odd) td {
        background-color: #ececec;
    }

    .table-bordered tbody tr:nth-child(even) td {
        /*background-color: #31979a2e;*/
    }

    .table-bordered tbody tr.highlight td {
        background-color: #F2F5A9;
    }

    /*.table-bordered tbody tr:hover {
        background-color: #86d8e6;
        color: black;
        font-weight: bold;
    }*/

    .ch {
        list-style: none;
        margin: 0;
        padding: 0;
        overflow: auto;
        display: inline-block;
        bottom: 50px;
        position: relative;
    }

        .ch li {
            color: #545050;
            display: block;
            position: relative;
            float: right;
            /*width: 100%;*/
            height: 100px;
            /*border-bottom: 1px solid #333;*/
            /*display: inline-block*/
        }

            .ch li input[type=radio] {
                position: absolute;
                visibility: hidden;
            }

            .ch li label {
                display: block;
                position: relative;
                font-weight: 300;
                font-size: 15px;
                padding: 24px 36px 0px 55px;
                margin: 9px auto;
                height: 30px;
                z-index: 9;
                cursor: pointer;
                -webkit-transition: all 0.25s linear;
            }

            .ch li:hover label {
                color: #3da4a7;
            }

            .ch li .check {
                display: block;
                position: absolute;
                border: 5px solid #686664;
                border-radius: 100%;
                height: 25px;
                width: 25px;
                top: 30px;
                left: 20px;
                z-index: 5;
                transition: border .25s linear;
                -webkit-transition: border .25s linear;
            }

            .ch li:hover .check {
                border: 5px solid #3da4a7;
            }

            .ch li .check::before {
                display: block;
                position: absolute;
                content: '';
                border-radius: 100%;
                height: 10px;
                width: 9px;
                top: 2px;
                left: 3px;
                margin: auto;
                transition: background 0.25s linear;
                -webkit-transition: background 0.25s linear;
            }

    input[type=radio]:checked ~ .check {
        border: 5px solid #0c6265;
    }

        input[type=radio]:checked ~ .check::before {
            background: #0c6265;
        }

    input[type=radio]:checked ~ label {
        color: #0c6265;
    }

    .pagination > .active > a, .pagination > .active > span, .pagination > .active > a:hover, .pagination > .active > span:hover, .pagination > .active > a:focus, .pagination > .active > span:focus {
        z-index: 2;
        color: #ffffff;
        cursor: default;
        background-color: #257e80 !important;
        border-color: #1da8ab !important;
    }

    .pagination {
        right: 292px;
        position: relative;
    }

    select.form-control:not([size]):not([multiple]), #permisionnumber {
        height: 3.573rem;
        margin-top: 8px;
    }

    a {
        color: #0032e6;
        text-decoration: none;
    }

    .test {
        color: #a52525 !important;
    }

    #checkRequest_lst {
        display: block;
        overflow-x: auto;
        position: relative;
    }

    #btn_Approved {
        margin-bottom: 10px;
        width: 40%;
        float: left;
        color: white;
    }

    .table > thead > tr > th, .table > tbody > tr > th, .table > tfoot > tr > th, .table > thead > tr > td, .table > tbody > tr > td, .table > tfoot > tr > td {
        padding: 3px !important;
    }

    #Results, #ActivatePrint {
        height: 37px;
        width: 133px;
        background-color: #1e7c80;
        border: 2px solid #1e8084;
        box-shadow: 0 4px #1d9fa5;
        outline: none;
        color: white;
        float: left;
        margin-top: 25px;
        border-radius: 0px
    }

    #cbid1, #cbid2 {
        float: right;
        margin: 4px 4px;
    }
</style>
<div class="row">

    <div class="col-md-4 col-sm-12">
        <div>
            <p style="font-weight:bold">@PlantQuar.WEB.Language.Resource_data1.PermissionNumber</p>
        </div>
        <input type="text" placeholder="بحث برقم الإذن" id="permisionnumber" class="form-control" />
    </div>
    <div class="col-md-4 col-sm-12">
        <input type="submit" value='بحث' placeholder="search" id="Results" class="form-control" onclick="results()" />
    </div>
</div>
<br />
<div class="row">
    <div class="col-md-4">
        <div id="divid"> </div>
    </div>


</div>
<br />
<input type="hidden" hidden id="ImPermission_Number_ID" class="form-control">
<div class="tab-content tabs" id="PrintStatusID" style="display:none">
    <table id="Im_CountryConstrainTable" class="table table-bordered table-striped dataTable" role="grid" style="width:100%">
        <thead>
            <tr>

                <th></th>
                <th style="font-weight:bold">الحاله السابقه</th>
                <th style="font-weight:bold">الحاله الجديده</th>
                @*<th style="font-weight:bold" hidden>ID</th>*@
            </tr>
        </thead>
        <tbody>

            <tr>
                <td style="font-weight:bold">طباعة نسخه عربى  </td>
                <td id="PreArabic"></td>
                <td>
                    <input type="checkbox" id="cbid1" class="form-control" onclick="updateLable()">
                    <span id="labelPrintAr">  </span>
                </td>
                @*<span id="labelPrintAr">لن يتم اعاده الطباعة مره اخري </span></td>*@
            </tr>
            <tr>
                <td style="font-weight:bold">طباعة نسخه انجليزى</td>
                <td id="PreEnglish"></td>
                <td>
                    <input type="checkbox" id="cbid2" class="form-control" onclick="updateLable()">
                    @*<span id="labelPrintEn">لن يتم اعاده الطباعة مره اخري   </span>*@
                    <span id="labelPrintEn">    </span>
                </td>              
            </tr>
        </tbody>
    </table>
</div>

<div class="row">
    <div class="col-md-4">
        <div id="divid1"> </div>
    </div>
    <div class="col-md-4">
        <input type="button" id="ActivatePrint" onclick="update()" value="تعديل" style="display:none" />
    </div>

</div>

<br />
<br />

<script>
    $(document).ready(function () {
        //  GetList();
        //  updateLable();
    });
    function GetList() {
        var permisionnumber = $('#permisionnumber').val();
        var isAcceppted = 1;
        $.ajax(
            {
                url: '/Im_Permissions/IM_Permission_Active_Print/GetPermissionsList?ImPermission_Number=' + permisionnumber
                    + '&Isacceppted=' + isAcceppted,
                type: 'POST',
                dataType: 'json',
                success: function (data) {
                    console.log(data[0].Im_PermissionRequest_ID)
                    //$("#ActivatePrint").st
                    document.getElementById("ActivatePrint").style.display = "block";
                    document.getElementById("PrintStatusID").style.display = "block";
                    document.getElementById("PreEnglish").innerHTML = data[0].IS_Print_EN ? "تمت الطباعه" : "لم يتم الطباعه";
                    document.getElementById("PreArabic").innerHTML =  data[0].IS_Print_Ar ? "تمت الطباعه" : "لم يتم الطباعه";
                    document.getElementById('labelPrintAr').innerHTML = data[0].IS_Print_Ar ? "لن يتم اعاده الطباعة العربي مره اخري" : "سيتم اعاده الطباعة العربي مره اخري";
                    document.getElementById('labelPrintEn').innerHTML = data[0].IS_Print_EN ? "لن  يتم اعاده الطباعة الانجليزي مره اخري" : "سيتم اعاده الطباعة الانجليزي مره اخري";
                    document.getElementById('ImPermission_Number_ID').value = data[0].Im_PermissionRequest_ID;
                    document.getElementById("cbid1").checked = data[0].IS_Print_Ar;
                    document.getElementById("cbid2").checked = data[0].IS_Print_EN;
                    //162021223131427
                    //console.log(data[0].IS_Print_EN)
                    //console.log( data[0].IS_Print_Ar)
                }
            });
    }
    function update() {

        activePrintDto = {}
        activePrintDto.ImPermission_Number = $('#permisionnumber').val();
        activePrintDto.ImPermission_Number_ID = document.getElementById('ImPermission_Number_ID').value;//permisionnumber;

        activePrintDto.IS_Print_Ar = $("#cbid1").is(":checked");
        activePrintDto.IS_Print_EN = $("#cbid2").is(":checked");
        activePrintDto.NOTS_AR = document.getElementById('labelPrintAr').innerHTML;
        activePrintDto.NOTS_EN = document.getElementById('labelPrintEn').innerHTML;
        $.ajax(
            {
                url: '/Im_Permissions/IM_Permission_Active_Print/UpdateUserDatal',
                data: { activePrintDto: activePrintDto },
                type: 'POST',
                dataType: 'json',
                success: function (data) {
                    alertify.success("done")
                }
            });
    }
    function results() {
        GetList();
        // updateLable();

    }
    function updateLable() {
        var IS_Print_Ar = $("#cbid1").is(":checked");
        var IS_Print_EN = $("#cbid2").is(":checked");
        document.getElementById('labelPrintAr').innerHTML = IS_Print_Ar ? "لن يتم اعاده الطباعة العربي مره اخري" : "سيتم اعاده الطباعة العربي مره اخري";
        document.getElementById('labelPrintEn').innerHTML = IS_Print_EN ? "لن  يتم اعاده الطباعة الانجليزي مره اخري" : "سيتم اعاده الطباعة الانجليزي مره اخري";

    }
</script>
