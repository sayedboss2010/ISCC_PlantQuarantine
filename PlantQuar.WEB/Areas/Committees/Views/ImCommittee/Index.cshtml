@model PlantQuar.DTO.DTO.Import.Permissions.ImRequestDetailsDTO

@{
    /**/

    ViewBag.Title = "Committee";
    Layout = "~/Views/Shared/_LayoutPage1.cshtml";
    var x = 0;

}


@section Title{
    <h2 class="ls-top-header">لجنة وارد</h2>
}
@section Path{

    <li class="active" style="right: 43px; position: relative;">Import Committe</li>
}
<link href="~/Content/jquery.timepicker.css" rel="stylesheet" />
<script src="~/scripts/jquery.timepicker.min.js"></script>
<style>
    @@media screen and (min-width: 768px) {
        .modal-dialog {
            left: 0% !important;
        }
    }

    th {
        font-size: 14px;
        font-weight: bold;
        text-align: center;
    }

    td {
        font-size: 12px;
        text-align: center;
    }

    .modal-content {
        color: #167479;
    }

    .modal-header {
        background-color: #167479;
        color: white;
    }

    table, table td, table th {
        border: 1px solid black !important;
        border-collapse: collapse;
        word-break: keep-all;
    }

    .modal-header .close {
        color: white !important;
    }

    .modal-header {
        background-color: #1e7c80;
        color: white;
    }

    #saverejectreason {
        background-color: #1e7c80;
        border: 2px solid #1e8084;
        box-shadow: 0 4px #1d9fa5;
        outline: none;
        width: 20%;
        margin: auto;
        font-size: 22px;
    }

    .modal-dialog {
        display: flex;
        justify-content: center;
        align-items: center;
        width: 100%;
        height: 70%;
    }

    .modal-content {
        /* position: absolute;
            top: 50%;*/
        width: 100%;
    }

    .form-control {
        font-size: 13px;
    }

    th, tr, td {
        text-align: center;
    }

    button, html input[type="button"], input[type="reset"], input[type="submit"] {
        margin-right: 0px;
    }

    blockquote {
        margin-bottom: 70px !important;
        padding: 50px 25px !important;
    }

    .jtable thead tr {
        height: 50px;
    }

    div.jtable-main-container > table.jtable > thead th.jtable-column-header div.jtable-column-header-container {
        bottom: 12px !important;
    }

    ul {
        list-style: none;
    }

    .table > thead > tr > th, .table > tbody > tr > th, .table > tfoot > tr > th, a, td, .table > thead > tr > td, .table > tbody > tr > td, .table > tfoot > tr > td {
        word-break: keep-all !important;
    }

    .display-none {
        display: none
    }

    .style-but {
        height: auto !important;
        color: white;
        background-color: #1e7c80;
        border: 2px solid #1e8084;
        box-shadow: 0 4px #1d9fa5;
        outline: none;
        color: white;
        margin-top: 5px;
    }

    #btnSave, #btnReject, #btnReject, #PrintResultButton {
        background-color: #1e7c80 !important;
        border: 2px solid #1e8084 !important;
        box-shadow: 0 4px #1d9fa5 !important;
        outline: none;
        color: white;
        margin-bottom: 10px;
    }

        #btnSave, #btnReject, #btnReject, #PrintResultButton:hover {
            background-color: #1a8488 !important;
            border: 1px solid #1a8488 !important;
        }

    #CommitteeType_ID {
        height: 3.573rem;
    }

    div.jtable-main-container > table.jtable > tbody > tr > td {
        font-size: 20px
    }

    .table-striped {
        font-size: 13px;
        font-weight: bold;
    }

    #ui-datepicker-div {
        z-index: 24 !important;
    }

    #Employee_AddEDIT {
        margin-bottom: 25px;
    }

    #submitValue, #search, .btnNext, #messagedata {
        background-color: #1e7c80 !important;
        border: 2px solid #1e8084 !important;
        box-shadow: 0 4px #1d9fa5 !important;
        outline: none;
        color: white !important;
        margin-top: 20px;
        width: 49%;
    }
</style>


<div class="form-box" id="lagnaDiv">

    <div class="tab" role="tabpanel" style="min-height:80% !important;">
        <ul class="row nav nav-tabs" role="tablist">
            <li role="presentation" class="active">
                <a href="#ItemsTab" aria-controls="profile" role="tab" id="itemTab_il" data-toggle="tab">معلومات اللجنة</a>
            </li>
            <li role="presentation" class="hidden">
                <a href="#empploy" aria-controls="profile" role="tab" id="empploy_il" data-toggle="tab" class="hidden">اسم الموظف</a>
            </li>
            <li role="presentation" class="hidden">
                <a href="#link3" aria-controls="profile" role="tab" data-toggle="tab" id="QualGrpTab" class="hidden">مواعيد النبواتجية</a>
            </li>

            <li role="presentation"  >
                <a href="#link4" aria-controls="profile" role="tab" data-toggle="tab">بيانات الرسالة</a>
            </li>
            @*<li role="presentation">
                    <a href="#QualGrpTab" aria-controls="profile" role="tab" id="qualGrp_il" data-toggle="tab">مواعيد النبواتجية</a>
                </li>*@
        </ul>
        <div class="tab-content tabs" style="background-color:whitesmoke  !important;">
            <div role="tabpanel" class="tab-pane fade in active" id="ItemsTab">

                <div class="row">
                    <div class="col-md-4">

                        <div class="">
                            <label>@PlantQuar.WEB.Language.Resource_data1.CommitteeType </label>
                            @*@if (ViewBag.ifRequestCommittee == 2)
                                {*@
                            <select id="CommitteeType_ID" class="form-control">
                                <option value="11">لجنه فحص وارد</option>
                                <option value="13">لجنه سحب وارد</option>

                            </select>
                            @*}
                                else
                                {
                                    <select id="CommitteeType_ID" class="form-control">

                                        <option value="7">لجنة الصرف</option>
                                        <option value="8">لجنة الاستلام</option>
                                        <option value="9">لجنة الاعدام</option>
                                    </select>
                                }*@

                        </div>

                    </div>
                    <div class="col-md-4">
                        <div class="">

                            <label>@PlantQuar.WEB.Language.Resource_data1.ExportRequestNumber</label>


                            <input type="text" name="CheckRequest_Number" id="CheckRequest_Number" value="@ViewBag.requestNumber" class="form-control" readonly />

                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-4">
                        <input type="hidden" name="OutLet_ID" id="OutLet_ID" class="form-control" readonly value="@ViewBag.OutLet_ID" />


                        <label> @PlantQuar.WEB.Language.Resource_data1.Date_of_registration_request  </label>
                        <input type="text" name="Check_Date" id="Check_Date" class="form-control" readonly value="@ViewBag.creationDate" />

                    </div>
                    <div class="col-md-4">

                        <label> @PlantQuar.WEB.Language.Resource_data1.Date_of_committee</label>
                        <input type="text" name="Delegation_Date" id="Delegation_Date" class="form-control" required />

                    </div>
                </div>
                <div class="row">
                    <div class="col-md-4">
                        <label> @PlantQuar.WEB.Language.Resource_data1.Time_of_ActionFrom</label>
                        <input type="time" name="StartTime" id="StartTime" class="form-control" />
                    </div>
                    <div class="col-md-4">

                        <label>  @PlantQuar.WEB.Language.Resource_data1.To</label>
                        <input type="time" name="EndTime" id="EndTime" class="form-control" />

                    </div>
                </div>

                <div class="row">
                    <div class="col-md-4"></div>
                    <div class="col-md-4"></div>
                    <div class="col-md-4">
                        <input type="button" class="btn btn-primary btnNext float-left" id="Next1" value="التالى">

                    </div>
                </div>
                @*<a href="#empploy" class="buut" aria-controls="profile" role="tab" id="empploy_il" data-toggle="tab">التالي</a>*@


            </div>

            <div role="tabpanel" class="tab-pane fade " id="empploy" style="height:auto;">

                <div class="row">
                    <div class="col-md-4">
                        <label> @PlantQuar.WEB.Language.Resource_data1.EmpolyeeName</label>
                        <input type="text" id="Employee_name" placeholder="enter emp name" class="form-control" />
                    </div>
                    <div class="col-md-4">
                        <label>  @PlantQuar.WEB.Language.Resource_data1.EmpolyeeNumber</label>
                        <input type="text" name="Employee_No" id="Employee_No" class="form-control" />
                    </div>
                    <div class="col-md-4" style="text-align:center">
                        <input type="button" id="search" onclick="MyFunction()" value="بحث بالموظف" />


                        <input type="hidden" id="CheckRequest_Id" value="@ViewBag.requestId" />
                        <input type="hidden" id="CommitteeId" value="@ViewBag.CommitteeId" />
                        <input type="hidden" name="Committe_Id" id="Committe_Id" value="@Session["reqComm_ID"]" class="form-control" readonly hidden />
                        @*<input type="hidden" id="Committe_Id" value="@ViewBag.CommitteeId" />*@
                        <input type="hidden" id="shiftId" />
                    </div>
                </div>
                <br />
                <div class="row">
                    <table id="Farm_Constrain_TextTable" class="table table-bordered table-striped dataTable" role="grid" style="padding:5px; width:100%">
                        <thead>
                            <tr>
                                <th>@PlantQuar.WEB.Language.Resource_data1.EmpolyeeNumber </th>
                                <th>اسم الموظف </th>
                                <th>محافظة الموظف </th>
                                <th>منفذ الموظف </th>
                                <th hidden>ادمن</th>
                                <th>تسجيل</th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>
                    <table id="myTable" border="1" name="gh" class="table table-bordered table-striped dataTable">
                        <thead>
                            <tr>
                                <th>اسم المهندس </th>
                                <th>كود المهندس </th>
                                <th>ادمن</th>
                                <th>حذف</th>

                            </tr>
                        </thead>
                        <tbody id="myTable2">
                        </tbody>
                    </table>

                </div>

                <div class="row">
                    <div class="col-md-4"></div>
                    <div class="col-md-4"></div>
                    <div class="col-md-4">
                        <input type="button" class="btn btn-primary btnNext float-left " id="Next_empploy" value="التالى">

                    </div>
                </div>

            </div>

            <div role="tabpanel" class="tab-pane fade" id="link3" style="height:auto;">

                <div class="row">
                    <div id="ShiftsAddEdit" style="width:100%">
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-4"></div>
                    <div class="col-md-4"></div>
                    <div class="col-md-4">
                        <input type="button" class="btn btn-primary btnNext float-left " id="shift" value="التالى">

                    </div>
                </div>
            </div>

            <div role="tabpanel" class="tab-pane fade" id="link4">
                <div id="MessageData" style="padding:10px;">
                    <div class="row">
                        <div class="col-md-12" >
                            @if (Model.itemsWithConstrains != null)
                            {
                                for (int i = 0; i < Model.checkRequestShipping.Count(); i++)
                                {
                                    <table class="table " style="border: 5px solid #1f6c6f !important;">
                                        <thead style="background-color:#1f6c6f!important">
                                            <tr>
                                                
                                                <th colspan="2">وسيلة الشحن</th>
                                                <th colspan="2">نوع التعبئة</th>
                                                <th colspan="3">السيل الملاحي</th>
                                                <th>وزن الحاوية</th>
                                                <th>رقم العنبر</th>
                                                <th colspan="3">اضافة</th>

                                            </tr>
                                        </thead>

                                        <tbody>

                                            <tr>

                                               
                                                <td colspan="2">@Model.checkRequestShipping[i].containerName</td>
                                                <td colspan="2">@Model.checkRequestShipping[i].containerType</td>

                                                <td colspan="3">@Model.checkRequestShipping[i].NavigationalNumber</td>
                                                <td >@Model.checkRequestShipping[i].Total_Weight</td>
                                                <td>@Model.checkRequestShipping[i].ShipholdNumber</td>
                                                <td colspan="3">
                                                    <input id="@i" class="style-but" type="button" onClick="reply_click(this)" value="بيانات النبات">
                                                    @*<input id="but @i" type="button">*@
                                                </td>
                                            </tr>


                                            <tr style=" background-color: rgb(77 ,158 ,151); color: #fff; font-weight: bold; font-size: 16px;" class="display-none toggle-div-@i">
                                                <td colspan="12" style="font-size:inherit">النبات</td>
                                            </tr>


                                            @for (int y = 0; y < Model.checkRequestShipping[i].Items_checkReq.Count(); y++)
                                            {
                                                <tr class="display-none toggle-div-@i">

                                                    <th style="background-color: rgb(77, 158, 151) !important;">أسم النبات</th>
                                                    <th style="background-color: rgb(77, 158, 151) !important;">النوع(مجموعة نوعية/نبات)</th>
                                                    <th style="background-color: rgb(77, 158, 151) !important;">الاسم المختصر</th>
                                                    <th style="background-color: rgb(77, 158, 151) !important;" colspan="2">دولة المنشأ</th>
                                                    <th style="background-color: rgb(77, 158, 151) !important;" colspan="2">الوزن الإجمالي</th>
                                                    <th style="background-color: rgb(77, 158, 151) !important;">الوزن الصافي</th>
                                                    <th style="background-color: rgb(77, 158, 151) !important;">اختار</th>
                                                    <th style="background-color: rgb(77, 158, 151) !important;">النبات</th>
                                                    <th style="background-color: rgb(77, 158, 151) !important;">المعامل</th>
                                                    <th style="background-color: rgb(77, 158, 151) !important;">نتائج العينات</th>

                                                </tr>


                                                <tr class="display-none toggle-div-@i">

                                                    <td>@Model.checkRequestShipping[i].Items_checkReq[y].ItemName</td>
                                                    <td>@Model.checkRequestShipping[i].Items_checkReq[y].qualitiveGroupName</td>
                                                    <td>@Model.checkRequestShipping[i].Items_checkReq[y].ItemShortNameAr</td>
                                                    <td colspan="2">@Model.checkRequestShipping[i].Items_checkReq[y].InitiatorCountry</td>
                                                    <td colspan="2">@Model.checkRequestShipping[i].Items_checkReq[y].GrossWeight</td>
                                                    <td>@Model.checkRequestShipping[i].Items_checkReq[y].Net_Weight</td>
                                                    <td>
                                                        @*//check*@
                                                        <input type="radio" id="@i@y" name="fav_language'+@Model.checkRequestShipping[i].Items_checkReq[y].ImcheckReqItem_ID+'" value="@Model.checkRequestShipping[i].Items_checkReq[y].ID#Totally">
                                                        <label for="@i@y">كلي</label><br>
                                                        <input type="radio" id="@y@i" name="fav_language'+@Model.checkRequestShipping[i].Items_checkReq[y].ImcheckReqItem_ID+'" value="@Model.checkRequestShipping[i].Items_checkReq[y].ID#Partial">
                                                        <label for="@y@i@y">جزئى</label><br>
                                                    </td>
                                                    <td>
                                                        <input id="@i@y" class="style-but" type="button" onClick="reply_click2(this)" value="بيانات اللوط">
                                                        @*<input id="but @i" type="button">*@
                                                    </td>
                                                    <td>
                                                        <input id="@i@y@i" class="style-but" type="button" onClick="reply_click3(this)" value="بيانات المعامل">

                                                    </td>
                                                    <td>
                                                        <input id="@i@y@i@y" class="style-but" type="button" onClick="reply_click4(this)" value="نتائج النبات">

                                                    </td>
                                                </tr>
                                                <tr class="display-none   toggle-div3-@i@y@i">
                                                    <td colspan="5">

                                                        <label>@PlantQuar.WEB.Language.Resource_data1.AnalysisType </label>

                                                        <select id="Analysisstr_@Model.checkRequestShipping[i].Items_checkReq[y].ID" name="Analysiss_name" class="form-control AnalysisLst"></select>

                                                    </td>

                                                    <td colspan="5">
                                                        <label>@PlantQuar.WEB.Language.Resource_data1.AnalysisLab </label>

                                                        <select id="AnalysisLabLstr_@Model.checkRequestShipping[i].Items_checkReq[y].ID" class="form-control AnalysisLabLst"></select>
                                                        @*<select id="AnalysisLabLsts" class="form-control"></select>*@

                                                    </td>
                                                    <td colspan="2">
                                                        <input id="@i@y@i@y" class="style-but" name="@Model.checkRequestShipping[i].Items_checkReq[y].ID" type="button" onClick="reply_click7(this)" value="@PlantQuar.WEB.Language.Resource_data1.Add">
                                                    </td>
                                                </tr>
                                                <tr class="display-none   toggle-div3-@i@y@i">
                                                    <td colspan="12">
                                                        <table id="myAnlysesTable" border="1" name="myAnlysesTable" class="table table-bordered table-striped dataTable">
                                                            <thead>
                                                                <tr>
                                                                    <th>التحاليل</th>
                                                                    <th>ID</th>
                                                                    <th>المعمل </th>
                                                                    <th>ID</th>
                                                                  

                                                                </tr>
                                                            </thead>
                                                            <tbody id="myAnlysesTable_Data_@Model.checkRequestShipping[i].Items_checkReq[y].ID">
                                                            </tbody>
                                                        </table>
                                                    </td>
                                                </tr>

                                                <tr style="background-color: rgb(145, 214 ,208);color: rgb(255, 255, 255); font-weight: bold; font-size: 16px;" class="display-none   toggle-div2-@i@y">
                                                    <td colspan="12" style="font-size:inherit">@PlantQuar.WEB.Language.Resource_data1.LotData</td>
                                                </tr>

                                                <tr class="display-none  toggle-div2-@i@y">
                                                    <th style=" background-color:rgb(145, 214, 208)!important">رقم اللوط</th>
                                                    <th style=" background-color:rgb(145, 214, 208)!important">أسم الصنف</th>
                                                    <th style=" background-color:rgb(145, 214, 208)!important">وزن إجمالي</th>
                                                    <th style=" background-color:rgb(145, 214, 208)!important">وزن صافي</th>
                                                    <th style=" background-color:rgb(145, 214, 208)!important">عدد العبوات</th>
                                                    <th style=" background-color:rgb(145, 214, 208)!important">وزن العبوات</th>
                                                    <th style=" background-color:rgb(145, 214, 208)!important">مادة العبوة</th>
                                                    <th colspan="2" style=" background-color: rgb(145, 214, 208)!important">واحدت التعبئة الخشبية</th>
                                                    <th style="background-color: rgb(145, 214, 208)!important">اختار</th>

                                                    <th style="background-color: rgb(145, 214, 208)!important">اضافة</th>
                                                    <th style="background-color: rgb(145, 214, 208)!important">الحاوية</th>
                                                </tr>
                                                for (int m = 0; m < Model.checkRequestShipping[i].Items_checkReq[y].ItemCategories_lots.Count(); m++)
                                                {
                                        <tr class="display-none  toggle-div2-@i@y">
                                            <td>@Model.checkRequestShipping[i].Items_checkReq[y].ItemCategories_lots[m].Lot_Number</td>
                                            <td>@Model.checkRequestShipping[i].Items_checkReq[y].ItemCategories_lots[m].categoryName</td>
                                            <td>@Model.checkRequestShipping[i].Items_checkReq[y].ItemCategories_lots[m].GrossWeight</td>
                                            <td>@Model.checkRequestShipping[i].Items_checkReq[y].ItemCategories_lots[m].Net_Weight</td>
                                            <td>@Model.checkRequestShipping[i].Items_checkReq[y].ItemCategories_lots[m].Package_Count</td>
                                            <td>@Model.checkRequestShipping[i].Items_checkReq[y].ItemCategories_lots[m].Package_Weight</td>

                                            <td>@Model.checkRequestShipping[i].Items_checkReq[y].ItemCategories_lots[m].packageMaterialName</td>
                                            <td colspan="2">@Model.checkRequestShipping[i].Items_checkReq[y].ItemCategories_lots[m].Number_Wooden_Package</td>

                                            <td>
                                                <input type="checkbox" id="@m@i" name="fav'+@m+'" value="@Model.checkRequestShipping[i].Items_checkReq[y].ItemCategories_lots[m].ID*@Model.checkRequestShipping[i].Items_checkReq[y].ID" autocomplete="off">

                                            </td>
                                            @*<td>
            <input id="Btn_AnalysisLab" class="style-but " type="button" onClick="reply_click5(this)" value="بيانات المعامل">


        </td>*@
                                            <td>
                                                <input id="@i@y@i@y@y" class="style-but" type="button" onClick="reply_click6(this)" value="no name">

                                            </td>
                                            <td >@Model.checkRequestShipping[i].ContainerNumber</td>
                                        </tr>
                                                }

                                                <tr class="display-none   toggle-div4-@i@y@i@y">
                                                    <td colspan="6">
                                                        <label>@PlantQuar.WEB.Language.Resource_data1.CommitteeType </label>
                                                        @*@if (ViewBag.ifRequestCommittee == 2)
                                                            {*@
                                                        @*<select id="CommitteeType_ID" class="form-control">
                                                                <option value="11">لجنه فحص وارد</option>
                                                                <option value="13">لجنه سحب وارد</option>

                                                            </select>*@
                                                    </td>
                                                    <td colspan="6"></td>
                                                </tr>



                                                <tr class="display-none   toggle-div5-@i@y@i@i">
                                                    <td colspan="6">
                                                    </td>
                                                    <td colspan="6"></td>
                                                </tr>
                                                <tr class="display-none   toggle-div6-@i@y@i@y@y">
                                                    <td colspan="6">
                                                    </td>
                                                    <td colspan="6"></td>
                                                </tr>

                                            }



                                        </tbody>
                                    </table>
                                    <br />
                                    <hr style="border-top: 1px solid #848484;" />
                                    <br />
                                }
                            }


                        </div>
                    </div>



                </div>

                <div class="row">
                    <div class="col-md-4">
                    </div>
                    <div class="col-md-4">
                    </div>
                    <div class="col-md-4" style="text-align:center">
                        <input type="button" class=" btn btn-primary btnNext float-left" id="messagedata" value="@PlantQuar.WEB.Language.Resource_data1.Save">

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>














@section scripts{

    <script type="text/javascript">

        //Date&Time Form
        $("#Delegation_Date").datepicker(
            {
                dateFormat: 'yy-mm-dd',
                changeYear: true,
            }
        );
            ///

             //************************SARA*********************//
            //ShiftsAddEdit
            @*$(function () {
                $('#ShiftsAddEdit').jtable({
                    title: '@PlantQuar.WEB.Language.Resource_data1.shiftTiming',
                    paging: true,
                    pageSize: 10,
                    sorting: true,
                    columnResizable: true,
                    columnSelectable: true,
                    saveUserPreferences: true,
                    actions: {
                        listAction: '/Committees/Committee/listshiftTiming',
                        createAction: '/Committees/Committee/CreateshiftTiming',
                        updateAction: '/Committees/Committee/UpdateshiftTiming',
                        deleteAction: '/Committees/Committee/DeleteshiftTiming',
                    },
                    fields: {
                        ID: {
                            key: true,
                            create: false,
                            edit: false,
                            list: false
                        },
                        Im_RequestCommittee_ID: {
                    title: 'ssss',

                    display: function (data) {
                       //debugger;
                        //alert($("#Committe_Id").val())
                        return " <input type='text' value='" + $("#Committe_Id").val() + "' /> ";
                        },
                        list: false

                    },
                        ShiftTiming_ID: {
                            title: '@PlantQuar.WEB.Language.Resource_data1.shiftTiming',
                            inputClass: 'validate[required]',
                            options: function (data) {
                                return '../../Committees/Committee/getShiftTiming_Lst';
                            },
                        },
                        money: {
                            title: 'money',
                            inputClass: 'validate[notrequired]',
                            type: 'text',
                        },
                        Count: {
                            title: '@PlantQuar.WEB.Language.Resource_data1.DaysNumber',
                            inputClass: 'validate[required]',
                            type: 'text',
                        },
                    },
                    formCreated: function (event, data) {
                        console.log($("#Committe_Id").val())
                        $("#Edit-Im_RequestCommittee_ID").val($("#Committe_Id").val());

                        $("#Edit-ShiftTiming_ID").change(function () {
                             $.ajax(
                {
                    url: '@Url.Action("getShiftTiming_Mony", "Committee", new { area = "Committees" })',
                                     type: 'Post',
                    //shiftId
                                     data: { shiftId: $(this).val() },
                    success: function (data) {
                        if (data.Options != null) {
                            $("#Edit-money").val(data.Options);
                        }

                    } //success
                 });//ajax
                        });
                        $('.jtable-input-field-container:nth-of-type(1)').hide();
                        $('#Edit-money').attr('readonly', 'readonly');
                        $('#Edit-Count').attr('type', 'number');

                        if (data.formType == "create") {
                            $(".ui-dialog-title").text("@PlantQuar.WEB.Language.Resource_data1.Add");
                        }
                        else {
                            $(".ui-dialog-title").text("@PlantQuar.WEB.Language.Resource_data1.Edit");
                        }
                    },
                    formSubmitting: function (event, data) {

                        return data.form.validationEngine('validate');
                    },
                    formClosed: function (event, data) {
                        data.form.validationEngine('hide');
                        data.form.validationEngine('detach');
                        $(".ui-dialog-title").text("@PlantQuar.WEB.Language.Resource_data1.Delete");
                    },
                    recordAdded: function (event, data) {
                        //Mah+Ag 17-4-2019 change display message
                        alertify.success("@PlantQuar.WEB.Language.Resource_data1.Save_Insert");
                    },
                    recordUpdated: function (event, data) {
                        //Mah+Ag 17-4-2019 change display message
                        alertify.success("@PlantQuar.WEB.Language.Resource_data1.Save_Update");
                    },
                    recordDeleted: function (event, data) {
                        //Mah+Ag 17-4-2019 change display message
                        alertify.success("@PlantQuar.WEB.Language.Resource_data1.Save_Delete");
                    },
                });
                $('#ShiftsAddEdit').jtable('load', { farmCommitteeId: '@ViewBag.CommitteeId' });

                $(".jtable-toolbar-item-add-record .jtable-toolbar-item-text").text("@PlantQuar.WEB.Language.Resource_data1.Add");
            });*@

    </script>

    <script>

            var list = [];


        function MyFunction() {
            $("#Farm_Constrain_TextTable tbody").empty();
            var EmplyeeName = document.getElementById("Employee_name").value;
            var Emplyee_No = $('#Employee_No').val();
            var OutLet_ID = $('#OutLet_ID').val();
            var EmplyeeNo;
           // //alert(Emplyee_No)
            if (Emplyee_No === "") {
                 EmplyeeNo = 0;

            }
            else {
                 EmplyeeNo = parseInt($('#Employee_No').val());

            }
         //  //alert(EmplyeeNo);
            

              $.ajax({
                        url: '@Url.Action("GetPR_User_Id", "ImCommittee")',
                        type: "POST",


                  data: { FullName: EmplyeeName, EmplyeeNo: EmplyeeNo,OutLet_ID:OutLet_ID},



                  success: function (data) {



                            for (var i = 0; i < data.length; i++) {
                                var item = data[i];
                                carName = 1;
                                $("#Farm_Constrain_TextTable tbody").append("<tr>" +

                                    "<td>  " + item.Value + "  </td>"
                                    +"<td>" + item.DisplayText + "</td>" +
                                    "<td>  " + item.Adress + "  </td>"
                                    + "<td>" + item.JobTitleName + "</td>"


                                    //+'<td><input type="radio" id="chckBox_' + i + '" class="change-selector" value="' + result[i].Value + '" name="hello"   )"/></td>'
                                    + '<td><input type="checkbox" id="chckBox_' + i + '' + i + '" class="chckClass_' + i + '" value="' + data[i].Value + '" Name="' + data[i].DisplayText + '"  onchange="helloo(this)" " /></td>'
                                 // +  "<td>" + item.Value + "</td>" +



                                    + "</tr>");

                            }



                    },
                        error: function (xhr, status, error) {

                    }
              });
            let checkboxes = $("input[type='checkbox']");
            selectedCboxes = Array.prototype.slice.call(checkboxes).filter(ch => ch.checked == true);
            //console.log(checkboxes);
        }

            function DeleteRow(element) {
                ////alert(element.name);
                //console.log(element);
                var table = document.getElementById("myTable");

                var c = '#id' + element.name + '';
                $(c).remove();
            }
        function helloo(element) {
           // //alert(element.value);


            if (element.checked) {
                //document.getElementById("myTable").insertRow(-1).innerHTML = '<td id=' + element.value + '>' + element.name
                //    + '</td><td>' + element.value + '</td>';



                //debugger;
                var table = document.getElementById("myTable2");

                var rowCount = table.rows.length;
                var row = table.insertRow(rowCount);
                row.id = 'id'+element.value;
                row.insertCell(0).innerHTML = element.name;
                row.insertCell(1).innerHTML = element.value;
                row.insertCell(2).innerHTML =
                    '<td><input type="radio" id="chckBox_' + element.value + '" class="change-selector" value="' + element.value + '" name="hello"   )"/></td>';
                row.insertCell(3).innerHTML =
                    '<td><a href="#" onclick="DeleteRow(this)" name="' + element.value + '">Delete</a></td>';
            }
            else {
                var c = '#id' + element.value + '';
                $(c).remove();

            }


            }


        function saveList() {

                var selectedOption = $("input:radio[name=hello]:checked").val()
                // //alert("Your are a - " + selectedOption);
                if (typeof selectedOption !== "undefined") {

                    var rows = document.getElementById("myTable2").rows;
                    for (var i = 0, ceiling = rows.length; i < ceiling; i++) {
                        cells = rows[i].getElementsByTagName('td');
                        Employee_name = cells[0].innerHTML;
                        Employee_Id = cells[1].innerHTML;


                        var id = parseInt(Employee_Id);
                        if (id == selectedOption) {
                            ISAdmin = true;
                            ////alert('d');
                            //console.log(selectedOption + ',,,,' + Employee_Id);
                        }
                        else {
                            ISAdmin = false;
                        }




                        //<th hidden>EmployeeNo</th>
                        //<th hidden>isAdmin</th>
                        //ISAdmin
                        //Employee_no
                        list.push({ Employee_name: Employee_name, Employee_Id: Employee_Id, ISAdmin: ISAdmin });

                    }
                    return list;
                }
                else {
                    return null;
                }

                //sayed
                      var selectedOption = $("input:checkbox[name=Checkbox1]:checked").val()
                // //alert("Your are a - " + selectedOption);
                if (typeof selectedOption !== "undefined") {

                    var rows = document.getElementById("myTable2").rows;
                    for (var i = 0, ceiling = rows.length; i < ceiling; i++) {
                        cells = rows[i].getElementsByTagName('td');
                        Employee_name = cells[0].innerHTML;
                        Employee_Id = cells[1].innerHTML;


                        var id = parseInt(Employee_Id);
                        if (id == selectedOption) {
                            ISAdmin = true;
                            ////alert('d');
                            //console.log(selectedOption + ',,,,' + Employee_Id);
                        }
                        else {
                            ISAdmin = false;
                        }
                        list.push({ Employee_name: Employee_name, Employee_Id: Employee_Id, ISAdmin: ISAdmin });
                    }
                    return list;
                }
                else {
                    return null;
                }
                //end sayed

            }
    </script>

    <script type="text/javascript">
                $(document).ready(function () {
                    $("#CommitteeType_ID").attr("class", "form-control");
                 //   GetCheckRequest_Number_Data();
                })
        $(function () {
        @*$('#Employee_AddEDIT').jtable({
            title: '@PlantQuar.WEB.Language.Resource_data1.CommitteMember',
            paging: true,
            pageSize: 10,
            sorting: true,
            selecting: true, //Enable selecting
            multiselect: true, //Allow multiple selecting
            selectingCheckboxes: true, //Show checkboxes on first column
            columnResizable: true,
            columnSelectable: true,
            saveUserPreferences: true,
                actions: {
               //listAction: '/Committee/ListEmployee',
                    listAction: function (postData, jtParams) {
                        return $.Deferred(function ($dfd) {
                            $.ajax({
                                url: '/Committee/ListEmployee?Employee_name=' + $("#Employee_name").val() + '&Employee_No=' + $("#Employee_No").val() + '&jtStartIndex=' + jtParams.jtStartIndex + '&jtPageSize=' + jtParams.jtPageSize + '&jtSorting=' + jtParams.jtSorting,
                                type: 'POST',
                                dataType: 'json',
                                data: postData,
                                success: function (data) {
                                    if (data.Result == '-1') {

                                      //  $dfd.resolve(null);
                                    }
                                    else {
                                        $.each(data.Records, function (index, r) {
                                            var row = '<tr class="jtable-data-row jtable-row-even"><td class="jtable-selecting-column"><input type="checkbox"></td><td>' + r.DisplayText + '</td><td>' +  r.Value+ '</td></tr>';
                                            $("#Employee_AddEDIT->tbody").append(row);
                                        });
                                          $dfd.resolve(data);
                                        //remove dublication
                                    }
                                },
                                error: function () {
                                  //  $dfd.reject();
                                }
                            });
                        });
                    }
                },
            fields: {
                Value: {
                    key: true,
                    create: false,
                    edit: false,
                    list: false
                },
                Employee_name: {
                    title: ' @PlantQuar.WEB.Language.Resource_data1.Member',
                    inputClass: 'validate[required]',
                },
                Employee_Id: {
                    title: '@PlantQuar.WEB.Language.Resource_data1.MemberNumber',
                    inputClass: 'validate[required]',
                },
                ISAdmin: {
                    title: ' @PlantQuar.WEB.Language.Resource_data1.isadmin',

                    //inputClass: 'validate[required]',
                    //type: 'checkbox',
                    display: function (data) {
                        //debugger;
                        return " <input type='checkbox' id='isadmin_" + data.record.Employee_Id + "' /> "
                    }

                    },
            },
            formCreated: function (event, data) {

                if (data.formType == "create") {
                    $(".ui-dialog-title").text("@PlantQuar.WEB.Language.Resource_data1.Add");
                }
                else {
                    $(".ui-dialog-title").text("@PlantQuar.WEB.Language.Resource_data1.Edit");
                }
            },
            formSubmitting: function (event, data) {
                return data.form.validationEngine('validate');
            },
            formClosed: function (event, data) {
                data.form.validationEngine('hide');
                data.form.validationEngine('detach');
                $(".ui-dialog-title").text("@PlantQuar.WEB.Language.Resource_data1.Delete");
            },
             recordAdded: function (event, data) {
                    //Mah+Ag 17-4-2019 change display message
                    alertify.success("@PlantQuar.WEB.Language.Resource_data1.Save_Insert");
                },
                recordUpdated: function (event, data) {
                                        //Mah+Ag 17-4-2019 change display message
                    alertify.success("@PlantQuar.WEB.Language.Resource_data1.Save_Update");
                },
            recordDeleted: function (event, data) {
                                        //Mah+Ag 17-4-2019 change display message
                    alertify.success("@PlantQuar.WEB.Language.Resource_data1.Save_Delete");
                },
        });*@

        $(".jtable-toolbar-item-add-record .jtable-toolbar-item-text").text("@PlantQuar.WEB.Language.Resource_data1.Add");

        //Date&Time Form
        $("#Delegation_Date").datepicker(
            {
                dateFormat: 'yy-mm-dd',
                changeYear: true,
            }
        );
            //$('#StartTime,#EndTime').timepicker({
            //    timeFormat: 'HH:mm',
            //    interval: 60,
            //    minTime: '10',
            //    maxTime: '06:00pm',
            //    defaultTime: '11:00',
            //    startTime: '10:00',
            //    dynamic: false,
            //    dropdown: true,
            //    scrollbar: true,
            //    });
                });

        String.prototype.compose = (function () {
            var re = /\{{(.+?)\}}/g;
            return function (o) {
                return this.replace(re, function (_, k) {
                    return typeof o[k] != 'undefined' ? o[k] : '';
                });
            }
                }());

                $("#CommitteeType_ID").change(function () {
                    GetCheckRequest_Number_Data(true);
                });
        //CheckRequest_Number save Committee
                        function GetCheckRequest_Number_Data(isChange=false) {


            CommitteeType_ID = $("#CommitteeType_ID").val()
                if ( CommitteeType_ID == "")
            {
                    alertify.error("يجب اختيار نوع اللجنة");
                return false;
            }
            $.ajax(
                {
                    url: "/Committee/SaveCommittee",
                    type: "POST",
                    data: {
                        CheckRequest_Number: $("#CheckRequest_Number").val(),
                        CommitteeType_ID: CommitteeType_ID
                    },
                    success: function (res) {

                        //reset data
                        //   $("#CommitteeType_ID").val(null);
                        $("#Check_Date").val(null);
                        $("#Delegation_Date").val(null);
                        $("#StartTime").val(null);
                        $("#EndTime").val(null);
                        $("#Employee_AddEDIT").hide();
                        $("#CheckRequest_Id").val(0);
                        if (res.Result == 1) {
                            //set data found
                            var Request_committe = res.Request_committe;

                            if (Request_committe.Check_Date != null) {
                                $("#Check_Date").val($.datepicker.formatDate('yy-mm-dd', (new Date(parseInt(Request_committe.Check_Date.substr(6))))));
                            } if (Request_committe.Delegation_Date != null) {
                                $("#Delegation_Date").val($.datepicker.formatDate('yy-mm-dd', (new Date(parseInt(Request_committe.Delegation_Date.substr(6))))));
                            }$("#StartTime").val(Request_committe.StartTime);
                            $("#EndTime").val(Request_committe.EndTime);
                            $("#Employee_AddEDIT").show();
                            $("#submitValue").removeAttr("disabled");
                            //get check_request id
                            $("#CheckRequest_Id").val(Request_committe.CheckRequest_Id);
                            var Committe_Id = Request_committe.Committe_Id ;
                            $("#Committe_Id").val(Request_committe.Committe_Id);
                        if (Committe_Id == -1)
                            {
                            //no committe is found
                            }
                        else if (Committe_Id >0) {
                                    //there is a committe for the current request
                            //edit data and display employee data
                            var Employee_list = Request_committe.Employee_list;
                            //Value    Employee_name    Employee_Id

                            var tbody = $('#Employee_AddEDIT').children('tbody');
                            var table = tbody.length ? tbody : $('#Employee_AddEDIT').children('tbody');
                            //19-3-2020 fz clear table body
                                $('#Employee_List  tbody').empty();
                            $.each(Employee_list, function (index, r) {
                            //     var row = '<tr class="jtable-data-row jtable-row-even jtable-row-selected"><td class="jtable-selecting-column"><input type="checkbox" checked></td><td>' + r.Employee_name + '</td><td>' + r.Employee_Id + '</td></tr>';
                                var row = ' <tr class="jtable-data-row-selected"><td class="jtable-selecting-column"><input type="checkbox" checked></td><td>' + r.Employee_Id + '</td><td>' + r.Employee_name + '</td><td>' + r.Employee_Id + '</td></tr>';
                                $("#Employee_AddEDIT tbody").append(row);
                            });
                                }
                        }
                        else {

                            $("#submitValue").attr("disabled", true);
                            alertify.error("خطأ فى رقم طلب الفحص");
                        }
                    }
                });
        }
        //btn_Search
                var arrayRecords = new Array();
                var Admin_List = [];
                var admin_index = 0;
                var is_Admin = 0;


         ///////////////////////////////////////////////Next 1

        $('#Next1').click(function (e) {


            var CommitteeType_ID = $("#CommitteeType_ID").val();
            Delegation_Date = $("#Delegation_Date").val();
            StartTime = $("#StartTime").val();
            EndTime = $("#EndTime").val();


            if (Delegation_Date == ""
                || StartTime == "" || EndTime == "") {
                alertify.error("يجب استكمال البيانات ");
                return false;
            }
            if (StartTime > EndTime) {

                alertify.error(" يجب ان يكون توقيت النهاية اكبر من توقيت البداية ");
                return false;
            }

         $.ajax({
                type: "POST",
                url: "/ImCommittee/Save_Committe",
                dataType: "json",
                //data: dataToSend,
                data: JSON.stringify(
                    {
                        //dataToSend: employees,
                        //isAdmins: Admin_List,

                        CheckRequest_Id: $("#CheckRequest_Id").val(),

                        CommitteeType_ID: CommitteeType_ID,
                        Check_Date: $("#Check_Date").val(),
                        Delegation_Date: $("#Delegation_Date").val(),
                        StartTime: $("#StartTime").val(),
                        EndTime: $("#EndTime").val(),

                    }),

                contentType: "application/json; charset=utf-8",
             success: function (data) {

                 if (data == "Exist") {
                    // //alert("Committee Inserted before")

                     $('.nav-tabs > .active').next('li').find('a').trigger('click');
                 }

                    else {


                        $("#Check_Date").val(null);
                        $("#Delegation_Date").val(null);
                        $("#StartTime").val(null);
                        $("#EndTime").val(null);

                        $("#CheckRequest_Id").val(0);

                      //  $("#CheckRequest_Id").val(0);
                        //$("#Committe_Id").val(data),

                    }
                }
            });


        });


        //// Next_empploy
          $('#Next_empploy').click(function (e) {


            //  var Committe_I = 161;
              var commId = $("#Committe_Id").val();
         //     //alert(commId);
                var employees = saveList();
                if (employees == null) {
                    alertify.error("يجب اختيار  ادمن ");
                    return false;
                }


                $('#Employee_List  tbody').empty();

                var CommitteeType_ID = $("#CommitteeType_ID").val();
                Delegation_Date = $("#Delegation_Date").val();
                StartTime = $("#StartTime").val();
                EndTime = $("#EndTime").val();


                if (Delegation_Date == ""
                        /*|| StartTime == "" || EndTime == ""*/) {
                    alertify.error("يجب استكمال البيانات ");
                    return false;
                }
                if (StartTime > EndTime) {

                    alertify.error(" يجب ان يكون توقيت النهاية اكبر من توقيت البداية ");
                    return false;
                }
                            $.ajax({
                                type: "POST",
                                url: "/ImCommittee/Save_Employee",
                                dataType: "json",
                                //data: dataToSend,
                                data: JSON.stringify(
                                    {
                                        dataToSend: employees,
                                        //isAdmins: Admin_List,

                                        CheckRequest_Id: $("#CheckRequest_Id").val(),
                                        Committe_Id:$("#Committe_Id").val(),
                                        CommitteeType_ID: CommitteeType_ID,
                                        Check_Date: $("#Check_Date").val(),
                                        Delegation_Date: $("#Delegation_Date").val(),
                                        StartTime: $("#StartTime").val(),
                                        EndTime: $("#EndTime").val(),

                                    }),
                                contentType: "application/json; charset=utf-8",
                                success: function (data) {
                                    if (data == "SavedEmpolyee") {


                                            $('.nav-tabs > .active').next('li').find('a').trigger('click');
                                    } else {
                                         $("#Check_Date").val(null);
                                    $("#Delegation_Date").val(null);
                                    $("#StartTime").val(null);
                                    $("#EndTime").val(null);
                                  //  $("#Employee_AddEDIT").hide();
                                        $("#CheckRequest_Id").val(0);
                                        $("#Committe_Id").val(data);

                                  //  window.location = '/Im_CheckRequests/List_ImCheckRequest/Index';
                                    }

                                }
                            });

            });



        $(function () {

                $('#ShiftsAddEdit').jtable({
                    title: '@PlantQuar.WEB.Language.Resource_data1.shiftTiming',
                    paging: true,
                    pageSize: 10,
                    sorting: true,
                    columnResizable: true,
                    columnSelectable: true,
                    saveUserPreferences: true,
                    actions: {
                        listAction: 'listshiftTiming',
                        createAction: 'CreateshiftTiming',
                        updateAction: 'UpdateshiftTiming',
                        deleteAction: 'DeleteshiftTiming',
                    },
                    fields: {
                        ID: {
                            key: true,
                            create: false,
                            edit: false,
                            list: false
                        },

                        ShiftTiming_ID: {
                            title: '@PlantQuar.WEB.Language.Resource_data1.shiftTiming',
                            inputClass: 'validate[required]',
                            options: function (data) {
                                return '../../Committees/Committee/getShiftTiming_Lst';
                            },
                        },
                        money: {
                            title: 'money',
                            inputClass: 'validate[notrequired]',
                            type: 'text',
                        },
                        Count: {
                            title: '@PlantQuar.WEB.Language.Resource_data1.DaysNumber',
                            inputClass: 'validate[required]',
                            type: 'text',
                        },


                    },
                    formCreated: function (event, data) {

                        //$("#Edit-Im_RequestCommittee_ID").val(@Session["reqComm_ID"]);

                        $("#Edit-ShiftTiming_ID").change(function () {
                             $.ajax(
                {
                    url: '@Url.Action("getShiftTiming_Mony", "Committee", new { area = "Committees" })',
                                     type: 'Post',
                    //shiftId
                                     data: { shiftId: $(this).val() },
                    success: function (data) {
                        if (data.Options != null) {
                            $("#Edit-money").val(data.Options);
                        }

                    } //success
                 });//ajax
                        });
                     //   $('.jtable-input-field-container:nth-of-type(1)').hide();
                        $('#Edit-money').attr('readonly', 'readonly');
                        $('#Edit-Count').attr('type', 'number');

                        if (data.formType == "create") {
                            $(".ui-dialog-title").text("@PlantQuar.WEB.Language.Resource_data1.Add");
                        }
                        else {
                            $(".ui-dialog-title").text("@PlantQuar.WEB.Language.Resource_data1.Edit");
                        }
                    },
                    formSubmitting: function (event, data) {
                        //if ($("#Committe_Id").val() == 0) {
                        //    return false;
                        //    //alert("save first")
                       // }
                        //return data.form.validationEngine('validate');
                    },
                    formClosed: function (event, data) {
                        data.form.validationEngine('hide');
                        data.form.validationEngine('detach');
                        $(".ui-dialog-title").text("@PlantQuar.WEB.Language.Resource_data1.Delete");
                    },
                    recordAdded: function (event, data) {
                        //Mah+Ag 17-4-2019 change display message
                        alertify.success("@PlantQuar.WEB.Language.Resource_data1.Save_Insert");
                    },
                    recordUpdated: function (event, data) {
                        //Mah+Ag 17-4-2019 change display message
                        alertify.success("@PlantQuar.WEB.Language.Resource_data1.Save_Update");
                    },
                    recordDeleted: function (event, data) {
                        //Mah+Ag 17-4-2019 change display message
                        alertify.success("@PlantQuar.WEB.Language.Resource_data1.Save_Delete");
                    },
                });
                $('#ShiftsAddEdit').jtable('load', { Im_RequestCommittee_ID: '@Session["reqComm_ID"]' });


                $(".jtable-toolbar-item-add-record .jtable-toolbar-item-text").text("@PlantQuar.WEB.Language.Resource_data1.Add");
            });

        $('#shift').click(function (e) { $('.nav-tabs > .active').next('li').find('a').trigger('click');  });

        /// ////////////////////////////////////////////Save Lots
        var CheckedAnalysisList = [];
        $('#messagedata').click(function (e) {

           // var CommitteeType_ID = $("#CommitteeType_ID").val();
            //var Committe_Id = $("#Committe_Id").val();
            ////alert("committee ID========"+Committe_Id)
            var CheckedItemsList = [];

            var Radios_1 = document.querySelectorAll('input[type=radio]:checked');       //to get checked checkboxes
            for (var i = 0; i < Radios_1.length; i++)   //to full CheckedItemsList
            {
                var c = Radios_1[i].value; // Item_ID#Total OR Part

                var TotallyORPartial = Radios_1[i].value.split('#')[1];
                var Item_ID = Radios_1[i].value.split('#')[0];
                var Totally1 = Item_ID + '#Totally/';
                var Totally = "";
                var Partial = Item_ID + '#Partial/';
                var obj = {};
                //  var Totally_ALL ;
                var checkboxes = document.querySelectorAll('input[type=checkbox]:checked');       //to get checked checkboxes
                //if (checkboxes.length > 0) {
                    if (TotallyORPartial == "Totally") {

                        if (checkboxes.length > 0);
                        {
                            for (var j = 0; j < checkboxes.length; j++)   //to full CheckedItemsList
                            {
                                var LotID = checkboxes[j].value;
                                var Item_ID_Lot = checkboxes[j].value.split('*')[1];
                                if (Item_ID == Item_ID_Lot) {
                                    Totally += LotID.split('*')[0] + ',';
                                }
                            }

                            CheckedItemsList.push({ Committee_ID: Committe_Id, Im_Request_Item_Id: Item_ID, LotData_ID: LotID, IS_Total: 1, Text_Lot: Totally });
                           // //alert("totally lots is added");
                            Totally = 0;
                        }
                    }
                    else if (TotallyORPartial == "Partial") {
                        var checkboxes_Partial = document.querySelectorAll('input[type=checkbox]:checked');       //to get checked checkboxes

                        for (var m = 0; m < checkboxes_Partial.length; m++)   //to full CheckedItemsList
                        {
                            var obj1 = {};
                            var LotID = checkboxes_Partial[m].value;   //to get value for every checked
                            var Item_ID_Lot = checkboxes_Partial[m].value.split('*')[1];
                            var Lot_Id = checkboxes_Partial[m].value.split('*')[0];
                            if (Item_ID == Item_ID_Lot) {

                                Partial = Item_ID + '#Partial' + LotID.split('*')[0];
                                CheckedItemsList.push({ Committee_ID: Committe_Id, Im_Request_Item_Id: Item_ID, LotData_ID: Lot_Id, IS_Total: 0, Text_Lot: "" });
                                Partial = 0;
                            }
                          //  //alert("partial lots is added");
                        }
                    }

                //}
                //else {
                //    alertify.error("يجب اختيار لوط على الاقل")
                //}
            }
              $.ajax({
                        url: '@Url.Action("Save_Lot", "ImCommittee")',
                        type: "POST",
                        //            dataType: "json",
                        //data: { lstPage: JSON.stringify(CheckedItemsList) },

                        data: "{CheckedItemsList:" + JSON.stringify(CheckedItemsList) + ",CheckedAnalysisList:" + JSON.stringify(CheckedAnalysisList) + "}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                                                success: function (response) {
                    alertify.success("@PlantQuar.WEB.Language.Resource_data1.Save_Insert");
                       location.href = "/Im_CheckRequests/List_ImCheckRequest/Index"
                        },
                        error: function (xhr, status, error) {
                            alertify.error("خطأ فى اضافه اللوطات");
                        }
                    });
        });



    </script>
    <script>
        function reply_click(element) {

            $(".toggle-div-" + element.id + "").toggle('fast', "linear");

        }
        function reply_click2(element) {

            $(".toggle-div2-" + element.id + "").toggle('fast', "linear");

        }
        function reply_click3(element) {

            $(".toggle-div3-" + element.id + "").toggle('fast', "linear");
         //   //alert(10);
            // التحليل
                   $.ajax(
                {
                    url: '@Url.Action("AnalysisType_AddEDIT", "AnalysisType", new { area = "DE_Analysis" })',
                           type: 'Post',

                    success: function (data) {
                        $('.AnalysisLst').empty();
                        $.each(data.Options, function (i, index) {
                            $('.AnalysisLst').append($('<option />').val(index.Value).text(index.DisplayText));

                        }); //each
                    } //success
                       });//ajax
            // المعمل

              @*$.ajax(
                {
                    url: '@Url.Action("GetAnalysisLabByAnalysisTypeId ", "AnalysisType", new { area = "DE_Analysis" })',
                      type: 'Post',
                      data: { AnalysisTypeId: $('.AnalysisLst').val() },
                      success: function (data) {

                        $('.AnalysisLabLst').empty();

                        $.each(data.Options, function (i, index) {


                            $('.AnalysisLabLst').append($('<option />').val(index.Value).text(index.DisplayText));

                        }); //each
                    } //success
                  });//ajax*@

        }
        function reply_click4(element) {

            $(".toggle-div4-" + element.id + "").toggle('fast', "linear");

        }
        function reply_click5(element) {
            $(".toggle-div5-" + element.id + "").toggle('fast', "linear");
                          @*$.ajax(
                {
                    url: '@Url.Action("AnalysisLab_AddEDIT", "AnalysisType", new { area = "DE_Analysis" })',
                    type: 'Post',
                    success: function (data) {
                        $('.AnalysisLabLst1').empty();

                        $.each(data.Options, function (i, index) {


                            $('.AnalysisLabLst1').append($('<option />').val(index.Value).text(index.DisplayText));

                        }); //each
                    } //success
                  });//ajax
                   $.ajax(
                {
                    url: '@Url.Action("AnalysisType_AddEDIT", "AnalysisType", new { area = "DE_Analysis" })',
                    type: 'Post',
                    success: function (data) {
                        $('.AnalysisLst1').empty();

                        $.each(data.Options, function (i, index) {


                            $('.AnalysisLst1').append($('<option />').val(index.Value).text(index.DisplayText));

                        }); //each
                    } //success
                 });//ajax*@
        }
        function reply_click6(element) {

            $(".toggle-div6-" + element.id + "").toggle('fast', "linear");

        }
        $('.AnalysisLst').on("change", function () {
            var id = $(this).attr('id');
            $.ajax(
                {
                    url: '@Url.Action("AnalysisLab_List", "AnalysisType", new { area = "DE_Analysis" })',
                    type: 'Post',
                    data: { AnalysisTypeId: $('#'+id).val() },
                    success: function (data) {
                        $('.AnalysisLabLst').empty();
                        $.each(data.Options, function (i, index) {
                            $('.AnalysisLabLst').append($('<option />').val(index.Value).text(index.DisplayText));
                        }); //each
                    } //success
                });//ajax
              });

        function reply_click7(element) {

            $(".toggle-div7-" + element.id + "").toggle('fast', "linear");
            var Item_ID = element.name;
            var Analysisstr_GetName = $("#Analysisstr_" + Item_ID + " option:selected").text();// $('#Analysiss_name').innerHTML.text;
            var Analysisstr_GetID = $("#Analysisstr_" + Item_ID + " option:selected").val();


            var Analysis_Lab_GetName = $("#AnalysisLabLstr_" + Item_ID + " option:selected").text();
            var Analysis_Lab_GetID = $("#AnalysisLabLstr_" + Item_ID + " option:selected").val();

            var rows = document.getElementById("myAnlysesTable_Data_" + Item_ID + "").rows;

            var id = 0;

            for (var i = 0, ceiling = rows.length; i < ceiling; i++) {
               // alert(rows.length);
                  cells = rows[i].getElementsByTagName('td');
                var id_cells = cells[3].innerHTML;
                if (Analysis_Lab_GetID == id_cells) {                    
                    id = 1;
                }
               
            }
            if (id == 0) {
                var table = document.getElementById("myAnlysesTable_Data_" + Item_ID + "");
                if (Analysisstr_GetID != 0) {

                    var rowCount = table.rows.length;
                    var row = table.insertRow(rowCount);


                    row.id = 'Analysisstr_GetID' + element.value;
                    row.insertCell(0).innerHTML = Analysisstr_GetName;
                    row.insertCell(1).innerHTML = Analysisstr_GetID;

                    row.insertCell(2).innerHTML = Analysis_Lab_GetName;
                    row.insertCell(3).innerHTML = Analysis_Lab_GetID;//2
                    //row.insertCell(4).innerHTML = Item_ID;//4
                    //row.insertCell(2).innerHTML =
                    //    '<td></td>';
                    //row.insertCell(4).innerHTML =
                    //    '<td><a href="#" onclick="DeleteRow(this)" name="asdasd">Delete</a></td>';
                    CheckedAnalysisList.push({
                        AnalysisLabType_ID: Analysis_Lab_GetID
                        , Im_Request_Item_Id: Item_ID
                    });
                    alertify.success("تمت الاضافه ");
                    //
                    //var id = 0;
                    //for (var i = 0, ceiling = rows.length; i < ceiling; i++) {

                    //    if (rows.length > 1) {
                    //        cells = rows[i].getElementsByTagName('td');
                    //        id = cells[3].innerHTML;

                    //        if (id == Analysis_Lab_GetID) {

                    //            id = 1;
                    //        }
                    //        else {
                    //            id = 0;
                    //          if (id == 0) {

                    //        }
                    //        }
                    //    }
                    //    else {
                    //        if (id == 0) {
                    //            row.id = 'Analysisstr_GetID' + element.value;
                    //            row.insertCell(0).innerHTML = Analysisstr_GetName;
                    //            row.insertCell(1).innerHTML = Analysisstr_GetID;

                    //            row.insertCell(2).innerHTML = Analysis_Lab_GetName;
                    //            row.insertCell(3).innerHTML = Analysis_Lab_GetID;//2
                    //            row.insertCell(4).innerHTML = Item_ID;//4
                    //            //row.insertCell(2).innerHTML =
                    //            //    '<td></td>';
                    //            row.insertCell(4).innerHTML =
                    //                '<td><a href="#" onclick="DeleteRow(this)" name="asdasd">Delete</a></td>';
                    //            CheckedAnalysisList.push({
                    //                AnalysisLabType_ID: Analysis_Lab_GetID
                    //                , Im_Request_Item_Id: Item_ID
                    //            });
                    //            alertify.success("تمت الاضافه ");
                    //        }
                    //    }
                    //}


                } else {
                    alertify.error("اختار التحاليل");
                }
            }
            else {
                    alertify.error("التحليل موجود مسبقا");
                }
        }
    </script>



}



