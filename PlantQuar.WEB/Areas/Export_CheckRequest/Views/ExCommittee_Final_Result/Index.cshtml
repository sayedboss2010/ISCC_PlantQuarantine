@model PlantQuar.DTO.DTO.Export_CheckRequest.ExCommittee_Final_ResultDTO

@{
    /**/

    ViewBag.Title = "Committee";
    Layout = "~/Views/Shared/_LayoutPage1.cshtml";
    var x = 0;

}


@section Title{
    <h2 class="ls-top-header">نتيجة لجان الوارد</h2>
}
@section Path{

    <li class="active" style="right: 43px; position: relative;">Import Committe</li>
}
<link href="~/Content/jquery.timepicker.css" rel="stylesheet" />
<script src="~/scripts/jquery.timepicker.min.js"></script>
<style>
    @@media screen and (min-width: 768px) {
        .modal-dialog {
            left: 0% !important;
        }
    }

    th {
        font-size: 14px;
        font-weight: bold;
        text-align: center;
    }

    td {
        font-size: 12px;
        text-align: center;
    }

    .modal-content {
        color: #167479;
    }

    .modal-header {
        background-color: #167479;
        color: white;
    }

    table, table td, table th {
        border: 1px solid black !important;
        border-collapse: collapse;
        word-break: keep-all;
    }

    .modal-header .close {
        color: white !important;
    }

    .modal-header {
        background-color: #1e7c80;
        color: white;
    }

    #saverejectreason {
        background-color: #1e7c80;
        border: 2px solid #1e8084;
        box-shadow: 0 4px #1d9fa5;
        outline: none;
        width: 20%;
        margin: auto;
        font-size: 22px;
    }

    .modal-dialog {
        display: flex;
        justify-content: center;
        align-items: center;
        width: 100%;
        height: 70%;
    }

    .modal-content {
        /* position: absolute;
            top: 50%;*/
        width: 100%;
    }

    .form-control {
        font-size: 13px;
    }

    th, tr, td {
        text-align: center;
    }

    button, html input[type="button"], input[type="reset"], input[type="submit"] {
        margin-right: 0px;
    }

    blockquote {
        margin-bottom: 70px !important;
    }

    .jtable thead tr {
        height: 50px;
    }

    div.jtable-main-container > table.jtable > thead th.jtable-column-header div.jtable-column-header-container {
        bottom: 12px !important;
    }

    ul {
        list-style: none;
    }

    .table > thead > tr > th, .table > tbody > tr > th, .table > tfoot > tr > th, a, td, .table > thead > tr > td, .table > tbody > tr > td, .table > tfoot > tr > td {
        word-break: keep-all !important;
    }

    .display-none {
        display: none
    }

    .style-but {
        height: auto !important;
        color: white;
        background-color: #1e7c80;
        border: 2px solid #1e8084;
        box-shadow: 0 4px #1d9fa5;
        outline: none;
        color: white;
        margin-top: 5px;
    }

    #btnSave, #btnReject, #btnReject, #PrintResultButton {
        background-color: #1e7c80 !important;
        border: 2px solid #1e8084 !important;
        box-shadow: 0 4px #1d9fa5 !important;
        outline: none;
        color: white;
        margin-bottom: 10px;
    }

        #btnSave, #btnReject, #btnReject, #PrintResultButton:hover {
            background-color: #1a8488 !important;
            border: 1px solid #1a8488 !important;
        }

    #CommitteeType_ID {
        height: 3.573rem;
    }

    div.jtable-main-container > table.jtable > tbody > tr > td {
        font-size: 20px
    }

    .table-striped {
        font-size: 13px;
        font-weight: bold;
    }

    #ui-datepicker-div {
        z-index: 24 !important;
    }

    #Employee_AddEDIT {
        margin-bottom: 25px;
    }

    #messagedata, #btn_Approved {
        background-color: #1e7c80 !important;
        border: 2px solid #1e8084 !important;
        box-shadow: 0 4px #1d9fa5 !important;
        outline: none;
        color: white !important;
        margin-top: 20px;
        width: 49%;
    }

    textarea {
        width: 60px;
    }

    .padding-left-50 {
        padding-left: 50px !important;
    }

    .btn-style {
        width: auto;
        height: auto;
        margin-right: 20px;
        margin-top: 30px;
    }
</style>

<div class="row">

    <label class="tapp-title">
        بيانات الرسالة
    </label>

</div>
<br />
<div class="row">
    <div class="col-md-6">
        <div class="row">
            <div class="col-md-3">
                <label>
                    رقم الطلب/
                </label>
            </div>
            <div class="col-md-9">
                <a href="/Im_CheckRequests/Im_CheckRequestDetails/Index?ImCheckRequest_Number=@Model.ImCheckRequest_Number"> @Model.ImCheckRequest_Number</a>
                @*<a href="/Im_CheckRequests/Im_CheckRequestDetails/Index?ImCheckRequest_Number='+data.record.ImCheckRequest_Number+'">' + data.record.ImCheckRequest_Number + '</a>'*@
            </div>
        </div>

    </div>
    <div class="col-md-6">
        <div class="row">
            <div class="col-md-3">
                <label> تاريخ الطلب/</label>
            </div>
            <div class="col-md-9">
                <input type="text" value="@Model.StartDate" readonly class="form-control " width="100" />
            </div>
        </div>
    </div>
</div>
<br />

<div class="row">

    <label class="tapp-title">
        بيانات الشهادة الجمركية
    </label>

</div>
<br />

@if (Model.CustomsMessages != null)
{
    for (int cm = 0; cm < Model.CustomsMessages.Count(); cm++)
    {
        <div class="row" style="margin-bottom:5px;">

            <div class="col-md-6">
                <div class="row">
                    <div class="col-md-6">
                        <label> رقم الشهادة الجمركية</label>
                    </div>
                    <div class="col-md-6">
                        <input type="text" value="@Model.CustomsMessages[cm].Customs_Certificate_Number" readonly class="form-control " width="100" />
                    </div>
                </div>
            </div>


            <div class="col-md-6">
                <div class="row">
                    <div class="col-md-6">
                        <label> تاريخ الشهادة</label>
                    </div>
                    <div class="col-md-6">
                        <input type="text" value="@Model.CustomsMessages[cm].Certification_Date.Value.ToString("dd/MM/yyyy")" readonly class="form-control " width="100" />
                    </div>
                </div>

            </div>
        </div>


        <div class="row" style="margin-bottom:5px;">



            <div class="col-md-6">
                <div class="row">

                    <div class="col-md-6">
                        <label> تاريخ الشحن</label>
                    </div>
                    <div class="col-md-6">
                        <input type="text" value="@Model.CustomsMessages[cm].Shipment_Date.Value.ToString("dd/MM/yyyy")" readonly class="form-control " width="100" />
                    </div>

                </div>
            </div>
            <div class="col-md-6">
                <div class="row">
                    <div class="col-md-6">
                        <label> تاريخ الوصول</label>
                    </div>
                    <div class="col-md-6">
                        <input type="text" value="@Model.CustomsMessages[cm].Arrival_Date.Value.ToString("dd/MM/yyyy")" readonly class="form-control " width="100" />
                    </div>
                </div>

            </div>
        </div>




        <div class="row" style="margin-bottom:5px;">
            <div class="col-md-6">
                <div class="row">
                    <div class="col-md-6">
                        <label> رقم الشهادة لكل منتج</label>
                    </div>
                    <div class="col-md-6">
                        <input type="text" value="@Model.CustomsMessages[cm].Certificate_Number_Each_Product" readonly class="form-control " width="100" />
                    </div>
                </div>
            </div>

            <input id="fullnameID" type="hidden" value="@ViewBag.Fullname" />

            <div class="col-md-6">
                <div class="row" style="margin-bottom:5px;">
                    <div class="col-md-6">
                        <label>رقم المنافيست</label>
                    </div>
                    <div class="col-md-6">
                        <input type="text" value="@Model.CustomsMessages[cm].Manifest_Number" readonly class="form-control " width="100" />
                    </div>
                </div>
            </div>

        </div>
        <div class="row" style="margin-bottom:5px;">
            <div class="col-md-6">
                <div class="row">
                    <div class="col-md-6">
                        <label> التوكيل الملاحي</label>
                    </div>
                    <div class="col-md-6">
                        <input type="text" value="@Model.CustomsMessages[cm].Shipping_Agency_Name" readonly class="form-control " width="100" />
                    </div>
                </div>
            </div>




            </div>
    }
}


<hr />


<br />
<div class="row">
    <div class="col-md-3">
        <div>
            <label>اسم المنتج</label>
        </div>

        <select class="form-control" id="itemShortNameLst">
            <option value="0">---اختر المنتج---</option>

        </select>
    </div>
    <div class="col-md-3">
        <div>
            <label> اللوط</label>
        </div>

        <select class="form-control" id="Lots_itemShortNameLst">
            <option value="0"> ---اختر---</option>
        </select>
    </div>
    <div class="col-md-3">
        <div>
            <label>اللجان</label>
        </div>

        <select class="form-control" id="CommitteeTypeLst">
            <option value="0"> ---اختر اللجنه---</option>
            <option value="11">فحص</option>
            <option value="13">سحب</option>

        </select>
        <input type="hidden" id="CommitteeTypeLstValue" />
    </div>
    <div class="col-md-3">
        <div>
            <label> موقف اللجنه</label>
        </div>

        <select class="form-control">
            <option value="8">الكل</option>
            <option value="7">مقبول</option>
            <option value="8">مرفوض</option>

        </select>
    </div>
</div>

<br />
<div class="row ">
    <div class="col-md-4"></div>
    <div class="col-md-4"></div>
    <div class="col-md-4 text-align-center">
        <input type="button" class=" btn btn-primary float-left" id="btn_Approved" value="بحث" autocomplete="off">
    </div>
</div>
<div class="form-box" id="lagnaDiv">

    <div class="tab" role="tabpanel" style="min-height:80% !important;">
        <ul class="row nav nav-tabs" role="tablist">

            <li role="presentation" class="active">
                <a href="#link" aria-controls="profile" role="tab" data-toggle="tab">بيانات الرسالة</a>
            </li>

        </ul>
        <div class="tab-content tabs" style="background-color:whitesmoke  !important;">


            <div role="tabpanel" class="tab-pane fade in active" id="link">
                <div id="MessageData" style="padding:10px;">
                    <div class="row">
                        <div class="col-md-12">

                            @if (Model.itemsWithConstrains != null)
                            {
                                for (int i = 0; i < Model.itemsWithConstrains.Count(); i++)
                                {
                                    <table id="itemTable" class="table " style="border: 5px solid #1f6c6f !important;">
                                        <tbody>
                                            <tr style=" background-color: rgb(77 ,158 ,151); color: #fff; font-weight: bold; font-size: 16px;" class="toggle-div-@i">
                                                <td colspan="12" style="font-size:inherit">النبات</td>
                                            </tr>
                                            <tr class="toggle-div-@i">

                                                <th style="background-color: rgb(77, 158, 151) !important;">أسم النبات</th>
                                                <th style="background-color: rgb(77, 158, 151) !important;">النوع(مجموعة نوعية/نبات)</th>
                                                <th style="background-color: rgb(77, 158, 151) !important;" colspan="2">الاسم المختصر</th>
                                                <th style="background-color: rgb(77, 158, 151) !important;" colspan="2">دولة المنشأ</th>
                                                <th style="background-color: rgb(77, 158, 151) !important;" colspan="2">الوزن الإجمالي</th>
                                                <th style="background-color: rgb(77, 158, 151) !important;">الوزن الصافي</th>

                                                <th colspan="3" style="background-color: rgb(77, 158, 151) !important;">النبات</th>


                                            </tr>
                                            <tr class="toggle-div-@i">

                                                <td>@Model.itemsWithConstrains[i].ItemName_Ar</td>
                                                <td>@Model.itemsWithConstrains[i].qualitiveGroupName</td>
                                                @*<td> @Model.itemsWithConstrains[i].qualitiveGroupName</td>*@
                                                <td colspan="2">@Model.itemsWithConstrains[i].ItemShortNameAr</td>
                                                <td colspan="2">@Model.itemsWithConstrains[i].InitiatorCountry</td>
                                                <td colspan="2">@Model.itemsWithConstrains[i].GrossWeight</td>
                                                <td>@Model.itemsWithConstrains[i].Net_Weight</td>
                                                @*<td colspan="2">@Model.itemsWithConstrains[i].InitiatorCountry</td>
                                                    <td colspan="2">@Model.itemsWithConstrains[i].GrossWeight</td>
                                                    <td>@Model.itemsWithConstrains[i].Net_Weight</td>*@
                                                @*<td colspan="2">

                                                        <input type="radio" id="@i@Model.itemsWithConstrains[i].Item_ShortName_ID" name="fav_language'+@Model.itemsWithConstrains[i].Item_ShortName_ID+'" value="@Model.itemsWithConstrains[i].Item_ShortName_ID#1#Totally">
                                                        <label for="@i@Model.itemsWithConstrains[i].Item_ID">كلي</label><br>
                                                        <input type="radio" id="@i@Model.itemsWithConstrains[i].Item_ShortName_ID" name="fav_language'+@Model.itemsWithConstrains[i].Item_ShortName_ID+'" value="@Model.itemsWithConstrains[i].Item_ShortName_ID#0#Partial">
                                                        <label for="@i@Model.itemsWithConstrains[i].Item_ShortName_ID">جزئى</label><br>
                                                    </td>*@



                                                <td colspan="3">
                                                    <input id="Lot_@i" class="style-but" type="button" onClick="reply_click2(this)" value="بيانات اللوط">
                                                    @*<input id="but @i" type="button">*@
                                                </td>


                                            </tr>
                                            <tr style="background-color: rgb(145, 214 ,208);color: rgb(255, 255, 255); font-weight: bold; font-size: 16px;" class="display-none   toggle-div2-Lot_@i">
                                                <td colspan="12" style="font-size:inherit">@PlantQuar.WEB.Language.Resource_data1.LotData</td>
                                            </tr>
                                            <tr class="display-none  toggle-div2-Lot_@i">
                                                <th style=" background-color:rgb(145, 214, 208)!important">رقم اللوط</th>
                                                <th hidden style=" background-color:rgb(145, 214, 208)!important">أسم الصنف</th>
                                                <th style=" background-color:rgb(145, 214, 208)!important">وزن إجمالي</th>
                                                <th style=" background-color:rgb(145, 214, 208)!important">وزن صافي</th>
                                                <th style=" background-color:rgb(145, 214, 208)!important">عدد العبوات</th>
                                                <th style=" background-color:rgb(145, 214, 208)!important">وزن العبوات</th>

                                                <th style=" background-color: rgb(145, 214, 208)!important">طريقة الفحص</th>
                                                <th style="background-color: rgb(145, 214, 208)!important">اضافة</th>
                                                <th style="background-color: rgb(145, 214, 208)!important"> رقم الحاوية</th>
                                                <th style="background-color: rgb(145, 214, 208)!important"> التفاصيل</th>
                                                <th colspan="2" style=" background-color: rgb(145, 214, 208)!important">ملاحظات</th>
                                                <th style="background-color: rgb(145, 214, 208)!important">موقف الحجر</th>
                                            </tr>
                                            @for (int m = 0; m < Model.itemsWithConstrains[i].ItemCategories_lots.Count(); m++)
                                            {
                                                <tr class="display-none  toggle-div2-Lot_@i">
                                                    <td>@Model.itemsWithConstrains[i].ItemCategories_lots[m].Lot_Number</td>
                                                    <td class="hidden">@Model.itemsWithConstrains[i].ItemCategories_lots[m].categoryName</td>
                                                    <td>@Model.itemsWithConstrains[i].ItemCategories_lots[m].GrossWeight</td>
                                                    <td>@Model.itemsWithConstrains[i].ItemCategories_lots[m].Net_Weight</td>
                                                    <td>@Model.itemsWithConstrains[i].ItemCategories_lots[m].Package_Count</td>
                                                    <td>@Model.itemsWithConstrains[i].ItemCategories_lots[m].Package_Weight</td>

                                                    <td></td>
                                                    <td>
                                                        <input id="Lot_Result_@Model.itemsWithConstrains[i].ItemCategories_lots[m].ID_Lot"
                                                               class="style-but" type="button" onClick="reply_click6(this)" value="النتائج السابقة">
                                                        @*<input id="istotalItem" type="text" value="@Model.itemsWithConstrains[i].ItemCategories_lots[m].IS_Total" />*@
                                                    </td>
                                                    <td>
                                                        <button type='button' class='quickview3' style="height: auto;color: white;background-color: #1e7c80;border: 2px solid #1e8084;box-shadow: 0 4px #1d9fa5; outline: none; color: white;margin-top: 5px;" data-toggle='modal'
                                                                data-target='#mymodalemanexamination'
                                                                data-containernumber="@Model.itemsWithConstrains[i].ItemCategories_lots[m].ContainerNumber"
                                                                data-contid="@Model.itemsWithConstrains[i].ItemCategories_lots[m].containerName"
                                                                data-containerstypeid="@Model.itemsWithConstrains[i].ItemCategories_lots[m].containerType"
                                                                data-shipholdnumber="@Model.itemsWithConstrains[i].ItemCategories_lots[m].ShipholdNumber"
                                                                data-navigationalnumber="@Model.itemsWithConstrains[i].ItemCategories_lots[m].NavigationalNumber"
                                                                data-totalweight="@Model.itemsWithConstrains[i].ItemCategories_lots[m].Total_Weight">
                                                            تفاصيل الحاوية
                                                        </button>


                                                    </td>
                                                    <td>
                                                        <button type='button' class='quickview1' style="height: auto;color: white;background-color: #1e7c80;border: 2px solid #1e8084;box-shadow: 0 4px #1d9fa5; outline: none; color: white;margin-top: 5px;" data-toggle='modal' data-target='#mymodalemanexamination'
                                                                data-grossweight="@Model.itemsWithConstrains[i].ItemCategories_lots[m].GrossWeight"
                                                                data-netweight="@Model.itemsWithConstrains[i].ItemCategories_lots[m].Net_Weight"
                                                                data-packagecount="@Model.itemsWithConstrains[i].ItemCategories_lots[m].Package_Count"
                                                                data-packageweight="@Model.itemsWithConstrains[i].ItemCategories_lots[m].Package_Weight"
                                                                data-ordertext="@Model.itemsWithConstrains[i].ItemCategories_lots[m].Order_TextLot"
                                                                data-recorded="@Model.itemsWithConstrains[i].ItemCategories_lots[m].RecordedOrNot"
                                                                data-packagetype="@Model.itemsWithConstrains[i].ItemCategories_lots[m].packageType"
                                                                data-reasonentry="@Model.itemsWithConstrains[i].ItemCategories_lots[m].Reason_Entry"
                                                                data-size="@Model.itemsWithConstrains[i].ItemCategories_lots[m].Size"
                                                                data-basedweight="@Model.itemsWithConstrains[i].ItemCategories_lots[m].Based_Weight"
                                                                data-pckgematerial="@Model.itemsWithConstrains[i].ItemCategories_lots[m].packageMaterialName"
                                                                data-packagebasedweight="@Model.itemsWithConstrains[i].ItemCategories_lots[m].Package_Based_Weight"
                                                                data-packagenetweight="@Model.itemsWithConstrains[i].ItemCategories_lots[m].Package_Net_Weight"
                                                                data-unitsnumber="@Model.itemsWithConstrains[i].ItemCategories_lots[m].Units_Number"
                                                                data-subpartname="@Model.itemsWithConstrains[i].subPartName"
                                                                data-itemcat="@Model.itemsWithConstrains[i].ItemCategories_lots[m].categoryName"
                                                                data-itemcatgroup="@Model.itemsWithConstrains[i].ItemCategories_lots[m].ItemCategoryGroup"
                                                                data-grower_number="@Model.itemsWithConstrains[i].ItemCategories_lots[m].Grower_Number"
                                                                data-number_wooden_package="@Model.itemsWithConstrains[i].ItemCategories_lots[m].Number_Wooden_Package"
                                                                data-shipmentpolicynumber="@Model.itemsWithConstrains[i].ItemCategories_lots[m].Waybill">
                                                            تفاصيل اللوط
                                                        </button>


                                                        @*<button type='button' class='quickview2' style="height: auto;color: white;background-color: #1e7c80;border: 2px solid #1e8084;box-shadow: 0 4px #1d9fa5; outline: none; color: white;margin-top: 5px;" data-toggle='modal'
                                                                    data-target='#mymodalemanexamination'
                                                                    data-outname="@Model.OutLet_Name"
                                                                    data-containernumber="@Model.itemsWithConstrains[i].ItemCategories_lots[m].ContainerNumber"
                                                                    data-qualitive="@Model.itemsWithConstrains[i].qualitiveGroupName"
                                                                    data-initiator="@Model.itemsWithConstrains[i].InitiatorCountry"
                                                                    data-itemsn="@Model.itemsWithConstrains[i].ItemShortNameAr"
                                                                    data-gweight="@Model.itemsWithConstrains[i].ItemCategories_lots[m].GrossWeight"
                                                                    data-nweight="@Model.itemsWithConstrains[i].ItemCategories_lots[m].Net_Weight"
                                                                    data-pmatrial="@Model.itemsWithConstrains[i].ItemCategories_lots[m].packageMaterial"
                                                                    data-ptype="@Model.itemsWithConstrains[i].ItemCategories_lots[m].packageType"
                                                                    data-packcount="@Model.itemsWithConstrains[i].ItemCategories_lots[m].Package_Count"
                                                                    data-pweight="@Model.itemsWithConstrains[i].ItemCategories_lots[m].Package_Weight"
                                                                    data-baseweight="@Model.itemsWithConstrains[i].ItemCategories_lots[m].Based_Weight"
                                                                    data-oldlot="@Model.itemsWithConstrains[i].ItemCategories_lots[m].Check_Lot_Old_Name"
                                                                    data-catname="@Model.itemsWithConstrains[i].ItemCategories_lots[m].categoryName"
                                                                    data-unitcount="@Model.itemsWithConstrains[i].ItemCategories_lots[m].Units_Number"
                                                                    data-ordertext="@Model.itemsWithConstrains[i].ItemCategories_lots[m].Order_Text">
                                                                @PlantQuar.WEB.Language.Resource_data1.Details
                                                            </button>*@
                                                    </td>
                                                    @{
                                                        bool Final_Result_Lot_Insert = false;
                                                        bool Result_Lot_Committee_Result = false;
                                                        bool Result_Lot_Committee_Sample = false;

                                                        int Committee_Result_Fa7s = 0;
                                                        int Committee_Result_Sample = 0;
                                                        if (ViewBag.CommitteeTypeLst_Value == 11 || ViewBag.CommitteeTypeLst_Value == 0)
                                                        { //هل يوجد فحص ام لا
                                                            if (Model.itemsWithConstrains[i].ItemCategories_lots[m].Lot_Committee_Result.Count() > 0)
                                                            {
                                                                for (int b = 0; b < Model.itemsWithConstrains[i].ItemCategories_lots[m].Lot_Committee_Result.Count(); b++)
                                                                {
                                                                    Committee_Result_Fa7s = 1;
                                                                    //التأكد من شغل الادمن فحص
                                                                    if (Model.itemsWithConstrains[i].ItemCategories_lots[m].Lot_Committee_Result.Where(a => a.ResultTypes_Name != null).Any())
                                                                    {
                                                                        //??????? نريد التأكد من وجود مساعد ام لا
                                                                        //التأكد من شغل المساعد فحص
                                                                        if (Model.itemsWithConstrains[i].ItemCategories_lots[m].Lot_Committee_Result[b].List_Committee_Result_Conferm.Count() > 0)
                                                                        {
                                                                            //var xyz = Model.itemsWithConstrains[i].ItemCategories_lots[m].Lot_Committee_Result[b].List_Committee_Result_Conferm.Where(a => a.IsAccepted != null).ToList();
                                                                            //foreach (var item in xyz)
                                                                            //{
                                                                            //    Result_Lot_Committee_Result = true;

                                                                            //}
                                                                            if (Model.itemsWithConstrains[i].ItemCategories_lots[m].Lot_Committee_Result[b].List_Committee_Result_Conferm.Where(a => a.IsAccepted == null).Any())
                                                                            {
                                                                                Result_Lot_Committee_Result = false;
                                                                            }
                                                                            else
                                                                            {
                                                                                Result_Lot_Committee_Result = true;
                                                                            }
                                                                        }
                                                                        else
                                                                        {
                                                                            Result_Lot_Committee_Result = true;
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }
                                                        if (ViewBag.CommitteeTypeLst_Value == 13 || ViewBag.CommitteeTypeLst_Value == 0)
                                                        {    //هل يوجد سحب
                                                            if (Model.itemsWithConstrains[i].ItemCategories_lots[m].list_Committee_Sample_Lot.Count() > 0)
                                                            {
                                                                Committee_Result_Sample = 2;
                                                                //التأكد من شغل الادمن سحب
                                                                if (Model.itemsWithConstrains[i].ItemCategories_lots[m].list_Committee_Sample_Lot.Where(a => a.IsAccepted != null).Any())
                                                                {
                                                                    //التأكد من شغل المساعد سحب
                                                                    if (Model.itemsWithConstrains[i].ItemCategories_lots[m].list_Committee_Sample_Lot.Where(a => a.List_Committee_Sample_Conferm.Count() > 0).Any())
                                                                    {
                                                                        //التأكد من شغل  المعمل
                                                                        if (Model.itemsWithConstrains[i].ItemCategories_lots[m].list_Committee_Sample_Lot.Where(a => a.IsAccepted == null).Any())
                                                                        {
                                                                            Result_Lot_Committee_Sample = false;
                                                                        }
                                                                        else
                                                                        {
                                                                            Result_Lot_Committee_Sample = true;
                                                                        }
                                                                    }
                                                                    else
                                                                    {
                                                                        //التأكد من شغل  المعمل
                                                                        if (Model.itemsWithConstrains[i].ItemCategories_lots[m].list_Committee_Sample_Lot.Where(a => a.IsAccepted != null).Any())
                                                                        {
                                                                            Result_Lot_Committee_Sample = true;
                                                                        }
                                                                    }


                                                                    //else  //التأكد من شغل  المعمل
                                                                    //    if (Model.itemsWithConstrains[i].ItemCategories_lots[m].list_Committee_Sample_Lot.Where(a => a.IsAccepted != null).Any())
                                                                    //    {
                                                                    //        Result_Lot_Committee_Sample = true;
                                                                    //    }

                                                                }
                                                            }
                                                        }
                                                        // التأكد للوط لجان سحب وفحص ولا
                                                        //  Committee_Result_Fa7s   Committee_Result_Sample





                                                        //if (Committee_Result_Fa7s != 0  || Committee_Result_Sample !=0 )
                                                        //{
                                                        //كده سحب وفحص
                                                        if (Committee_Result_Fa7s == 1 && Committee_Result_Sample == 2)
                                                        {
                                                            if (Result_Lot_Committee_Result == Result_Lot_Committee_Sample && Result_Lot_Committee_Sample == true)
                                                            {
                                                                Final_Result_Lot_Insert = true;
                                                            }
                                                            else
                                                            {
                                                                Final_Result_Lot_Insert = false;
                                                            }

                                                        }
                                                        else if (Committee_Result_Fa7s == 1) // فحص فقط
                                                        {
                                                            if (Result_Lot_Committee_Result == true)
                                                            {
                                                                Final_Result_Lot_Insert = true;
                                                            }
                                                            else
                                                            {
                                                                Final_Result_Lot_Insert = false;
                                                            }
                                                        }
                                                        //else    if (Committee_Result_Sample == 2) // سحب فقط
                                                        //{
                                                        //    if ( Result_Lot_Committee_Sample == true)
                                                        //    {
                                                        //        Final_Result_Lot_Insert = true;
                                                        //    }
                                                        //    else
                                                        //    {
                                                        //        Final_Result_Lot_Insert = false;
                                                        //    }
                                                        //}
                                                        //}
                                                        else // لا يوجد سحب او فحص
                                                        {
                                                            Final_Result_Lot_Insert = false;
                                                        }


                                                    }

                                                    @if (Final_Result_Lot_Insert == true)
                                                    {

                                                        if (@Model.itemsWithConstrains[i].ItemCategories_lots[m].IS_Status_Lot_Result != null)
                                                        {
                                                            <td colspan="2"><label>@Model.itemsWithConstrains[i].ItemCategories_lots[m].Note_Lot_Result</label></td>
                                                            if (@Model.itemsWithConstrains[i].ItemCategories_lots[m].IS_Status_Lot_Result == true)
                                                            {
                                                                <td colspan="2"><label>تم قبول اللوط</label></td>
                                                            }
                                                            else if (@Model.itemsWithConstrains[i].ItemCategories_lots[m].IS_Status_Lot_Result == false)
                                                            {
                                                                <td colspan="2"><label>تم رفض اللوط</label></td>
                                                            }

                                                        }
                                                        else
                                                        {
                                                            if (@Model.itemsWithConstrains[i].ItemCategories_lots[m].CommitteeResultType_ID != 7)
                                                            {
                                                                <td colspan="2"><textarea id="Txt_Nots_@Model.itemsWithConstrains[i].ItemCategories_lots[m].ID_Lot"></textarea></td>
                                                                <td class="padding-left-50">
                                                                    <div class="row">
                                                                        <div class="col-md-6">
                                                                            <input type="radio" id="radio_Accept_@Model.itemsWithConstrains[i].ItemCategories_lots[m].ID_Lot"
                                                                                   value="1_@Model.itemsWithConstrains[i].ItemCategories_lots[m].ID_Lot" name="accept">
                                                                            <label for="1">مقبول</label><br>
                                                                            <input type="radio" id="radio_Reject_@Model.itemsWithConstrains[i].ItemCategories_lots[m].ID_Lot"
                                                                                   value="2_@Model.itemsWithConstrains[i].ItemCategories_lots[m].ID_Lot" name="accept">
                                                                            <label for="2">مرفوض</label><br>
                                                                        </div>
                                                                        <div class="col-md-6">
                                                                            <button id="Insert_Lot_Result_@Model.itemsWithConstrains[i].ItemCategories_lots[m].ID_Lot"
                                                                                    name="@Model.itemsWithConstrains[i].ItemCategories_lots[m].ID_Lot" class="btn-style" onClick="reply_Insert_Lot_Result(this)">
                                                                                حفظ
                                                                            </button>


                                                                        </div>
                                                                    </div>
                                                                </td>
                                                            }
                                                            else
                                                            {
                                                                <td colspan="4">  @Model.itemsWithConstrains[i].ItemCategories_lots[m].CommitteeResultType_ID تعذر الفحص على هذا اللوط</td>
                                                            }
                                                        }
                                                    }
                                                    else
                                                    {
                                                        <td colspan="4"> لم يتم عمل اللجان حتى يتثنى لك العمل على موقف اللوط</td>
                                                    }

                                                </tr>



                                                /********/
                                                if (ViewBag.CommitteeTypeLst_Value == 11 || ViewBag.CommitteeTypeLst_Value == 0)
                                                {
                                                    if (Model.itemsWithConstrains[i].ItemCategories_lots[m].Lot_Committee_Result.Count() > 0)
                                                    {

                                                        <tr style="background-color: rgb(145, 214, 208); color: rgb(255, 255, 255); font-weight: bold; font-size: 16px;"
                                                            class="display-none toggle-div6-Lot_Result_@Model.itemsWithConstrains[i].ItemCategories_lots[m].ID_Lot">
                                                            <td colspan="12" style="font-size:inherit">نتيجة معاينة لوط : @Model.itemsWithConstrains[i].ItemCategories_lots[m].Lot_Number</td>
                                                        </tr>

                                                        <tr class="display-none toggle-div6-Lot_Result_@Model.itemsWithConstrains[i].ItemCategories_lots[m].ID_Lot">
                                                            <th colspan="6" style=" background-color:rgb(145, 214, 208)!important">نتيجة المعاينة أدمن</th>
                                                            <th colspan="1" style=" background-color:rgb(145, 214, 208)!important">طريقة فحص اللجنة للوط </th>
                                                            <th colspan="5" style=" background-color:rgb(145, 214, 208)!important">نتيجة معاينة المساعد</th>
                                                        </tr>

                                                        for (int a = 0; a < Model.itemsWithConstrains[i].ItemCategories_lots[m].Lot_Committee_Result.Count(); a++)
                                                        {
                                                            <tr class="display-none toggle-div6-Lot_Result_@Model.itemsWithConstrains[i].ItemCategories_lots[m].ID_Lot">
                                                                <td colspan="6">
                                                                    <div class="row">
                                                                        @if (@Model.itemsWithConstrains[i].ItemCategories_lots[m].Lot_Committee_Result[a].ResultTypes_Name != null)
                                                                        {
                                                                            <div class="col-md-6">@Model.itemsWithConstrains[i].ItemCategories_lots[m].Lot_Committee_Result[a].ResultTypes_Name</div>

                                                                        }
                                                                        else
                                                                        {
                                                                            <div class="col-md-6">لا توجد نتيجة</div>
                                                                        }
                                                                        <div class="col-md-6">
                                                                            <button type='button' class='quickview4' style="height: auto;color: white;background-color: #1e7c80;border: 2px solid #1e8084;box-shadow: 0 4px #1d9fa5; outline: none; color: white;margin-top: 5px;" data-toggle='modal'
                                                                                    data-target='#mymodalemanexamination'
                                                                                    data-delegationdate="@Model.itemsWithConstrains[i].ItemCategories_lots[m].Lot_Committee_Result[a].Delegation_Date.Value.ToString("dd/MM/yyyy")"
                                                                                    data-employeeid="@Model.itemsWithConstrains[i].ItemCategories_lots[m].Lot_Committee_Result[a].EmployeeId"
                                                                                    data-employeename="@Model.itemsWithConstrains[i].ItemCategories_lots[m].Lot_Committee_Result[a].Employee_Name"
                                                                                    data-starttime="@Model.itemsWithConstrains[i].ItemCategories_lots[m].Lot_Committee_Result[a].StartTime"
                                                                                    data-endtime="@Model.itemsWithConstrains[i].ItemCategories_lots[m].Lot_Committee_Result[a].EndTime"
                                                                                    data-notes="@Model.itemsWithConstrains[i].ItemCategories_lots[m].Lot_Committee_Result[a].Notes">
                                                                                @PlantQuar.WEB.Language.Resource_data1.Details
                                                                            </button>
                                                                        </div>
                                                                    </div>


                                                                    @if (Model.itemsWithConstrains[i].ItemCategories_lots[m].Lot_Committee_Result[a].List_Im_CommitteeResult_Infection.Count() > 0)
                                                                    {

                                                                        <div class="row" style="margin-top: 20px;">
                                                                            <div class="col-md-12">


                                                                                @*noura*@
                                                                                @*Mohamed الافة*@

                                                                                <table id='popup'>
                                                                                    <thead>
                                                                                        <tr>
                                                                                            <th hidden="hidden">الرقم</th>
                                                                                            <th hidden="hidden">رقم الافة</th>
                                                                                            <th hidden="hidden">رقم النتيجة</th>
                                                                                            <th>اسم الافة</th>
                                                                                            <th>اسم الافة العلمى</th>
                                                                                            <th>تفاصيل</th>

                                                                                        </tr>
                                                                                    </thead>
                                                                                    <tbody>
                                                                                        @for (int c = 0; c < Model.itemsWithConstrains[i].ItemCategories_lots[m].Lot_Committee_Result[a].List_Im_CommitteeResult_Infection.Count(); c++)
                                                                                        {
                                                                                            <tr>
                                                                                                <td hidden="hidden">
                                                                                                    @Model.itemsWithConstrains[i].ItemCategories_lots[m].Lot_Committee_Result[a].List_Im_CommitteeResult_Infection[c].ID
                                                                                                </td>
                                                                                                <td hidden="hidden">
                                                                                                    @Model.itemsWithConstrains[i].ItemCategories_lots[m].Lot_Committee_Result[a].List_Im_CommitteeResult_Infection[c].Item_ID
                                                                                                </td>
                                                                                                <td hidden="hidden">
                                                                                                    @Model.itemsWithConstrains[i].ItemCategories_lots[m].Lot_Committee_Result[a].List_Im_CommitteeResult_Infection[c].Im_CommitteeResult_ID
                                                                                                </td>
                                                                                                <td>
                                                                                                    @Model.itemsWithConstrains[i].ItemCategories_lots[m].Lot_Committee_Result[a].List_Im_CommitteeResult_Infection[c].Item_Name
                                                                                                </td>
                                                                                                <td>
                                                                                                    @Model.itemsWithConstrains[i].ItemCategories_lots[m].Lot_Committee_Result[a].List_Im_CommitteeResult_Infection[c].Scientific_Name
                                                                                                </td>
                                                                                                <td style="padding-bottom: 10px;">
                                                                                                    <button type='button' class='quickview6' style="height: auto;color: white;background-color: #1e7c80;border: 2px solid #1e8084;box-shadow: 0 4px #1d9fa5; outline: none; color: white;margin-top: 5px;" data-toggle='modal'
                                                                                                            data-target='#mymodalemanexamination'
                                                                                                            data-itemname="@Model.itemsWithConstrains[i].ItemCategories_lots[m].Lot_Committee_Result[a].List_Im_CommitteeResult_Infection[c].Item_Name"
                                                                                                            data-mainname="@Model.itemsWithConstrains[i].ItemCategories_lots[m].Lot_Committee_Result[a].List_Im_CommitteeResult_Infection[c].Main_Classification_Name"
                                                                                                            data-secondaryname="@Model.itemsWithConstrains[i].ItemCategories_lots[m].Lot_Committee_Result[a].List_Im_CommitteeResult_Infection[c].Secondary_Classification_Name"
                                                                                                            data-groupname="@Model.itemsWithConstrains[i].ItemCategories_lots[m].Lot_Committee_Result[a].List_Im_CommitteeResult_Infection[c].Group_Name"
                                                                                                            data-kingdomname="@Model.itemsWithConstrains[i].ItemCategories_lots[m].Lot_Committee_Result[a].List_Im_CommitteeResult_Infection[c].KingdomName"
                                                                                                            data-phylumsub="@Model.itemsWithConstrains[i].ItemCategories_lots[m].Lot_Committee_Result[a].List_Im_CommitteeResult_Infection[c].PhylumSubphylumName"
                                                                                                            data-famliyname="@Model.itemsWithConstrains[i].ItemCategories_lots[m].Lot_Committee_Result[a].List_Im_CommitteeResult_Infection[c].FamliyName"
                                                                                                            data-scientificname="@Model.itemsWithConstrains[i].ItemCategories_lots[m].Lot_Committee_Result[a].List_Im_CommitteeResult_Infection[c].Scientific_Name"
                                                                                                            data-description="@Model.itemsWithConstrains[i].ItemCategories_lots[m].Lot_Committee_Result[a].List_Im_CommitteeResult_Infection[c].Description"
                                                                                                            data-isplantegypt="@Model.itemsWithConstrains[i].ItemCategories_lots[m].Lot_Committee_Result[a].List_Im_CommitteeResult_Infection[c].Is_Plant_Egypt"
                                                                                                            data-isforbidden="@Model.itemsWithConstrains[i].ItemCategories_lots[m].Lot_Committee_Result[a].List_Im_CommitteeResult_Infection[c].Is_Forbidden"
                                                                                                            data-isforbiddenreason="@Model.itemsWithConstrains[i].ItemCategories_lots[m].Lot_Committee_Result[a].List_Im_CommitteeResult_Infection[c].Is_Forbidden_Reason"
                                                                                                            data-isknownitem="@Model.itemsWithConstrains[i].ItemCategories_lots[m].Lot_Committee_Result[a].List_Im_CommitteeResult_Infection[c].Is_Known_Item"
                                                                                                            data-ordername="@Model.itemsWithConstrains[i].ItemCategories_lots[m].Lot_Committee_Result[a].List_Im_CommitteeResult_Infection[c].Order_Name"
                                                                                                            data-picture="@Model.itemsWithConstrains[i].ItemCategories_lots[m].Lot_Committee_Result[a].List_Im_CommitteeResult_Infection[c].Picture">
                                                                                                        تفاصيل الآفة
                                                                                                    </button>
                                                                                                </td>

                                                                                            </tr>
                                                                                        }

                                                                                    </tbody>
                                                                                </table><asp:Image runat="server"></asp:Image>
                                                                            </div>
                                                                        </div>
                                                                        <br />
                                                                        <div class="col-md-4">
                                                                            @if (Model.itemsWithConstrains[i].ItemCategories_lots[m].AttachmentData_Im_CommitteeResult_Infection != null)
                                                                            {
                                                                                for (int cc = 0; cc < Model.itemsWithConstrains[i].ItemCategories_lots[m].AttachmentData_Im_CommitteeResult_Infection.Count(); cc++)
                                                                                {
                                                                                    string imageBase64 = Convert.ToBase64String(@Model.itemsWithConstrains[i].ItemCategories_lots[m].AttachmentData_Im_CommitteeResult_Infection[cc].AttachmentPath_Binary);
                                                                                    string imageSrc = string.Format("data:image/png;base64,{0}", imageBase64);

                                                                                    <button type='button' class='quickview7'
                                                                                            style="height: auto;color: white;background-color: #1e7c80;border: 2px solid #1e8084;box-shadow: 0 4px #1d9fa5; outline: none; color: white;margin-top: 5px;" data-toggle='modal'
                                                                                            data-target='#mymodalemanexamination'
                                                                                            data-picture="@imageSrc">
                                                                                        الصورة
                                                                                    </button>
                                                                                }
                                                                            }
                                                                        </div>


                                                                    }


                                                                </td>

                                                                <td colspan="1">

                                                                    @if (@Model.itemsWithConstrains[i].ItemCategories_lots[m].Lot_Committee_Result[a].IS_Total is true

                                                                                        && (@Model.itemsWithConstrains[i].ItemCategories_lots[m].Lot_Committee_Result[a].IS_TotalAndroid is null
                                                                                        || @Model.itemsWithConstrains[i].ItemCategories_lots[m].Lot_Committee_Result[a].IS_TotalAndroid is true))
                                                                    {
                                                                        <label>  كلي</label>

                                                                    }
                                                                    else if (@Model.itemsWithConstrains[i].ItemCategories_lots[m].Lot_Committee_Result[a].IS_Total is false || @Model.itemsWithConstrains[i].ItemCategories_lots[m].Lot_Committee_Result[a].IS_TotalAndroid is false)
                                                                    {
                                                                        <label> جزئي</label>
                                                                    }

                                                                    else
                                                                    {
                                                                        <label> لم يتم العمل علي هذا اللوط</label>
                                                                    }
                                                                </td>
                                                                <td colspan="5">
                                                                    @if (Model.itemsWithConstrains[i].ItemCategories_lots[m].Lot_Committee_Result[a].List_Committee_Result_Conferm != null)
                                                                    {
                                                                        if (Model.itemsWithConstrains[i].ItemCategories_lots[m].Lot_Committee_Result[a].List_Committee_Result_Conferm.Count > 0)
                                                                        {
                                                                            for (int b = 0; b < Model.itemsWithConstrains[i].ItemCategories_lots[m].Lot_Committee_Result[a].List_Committee_Result_Conferm.Count(); b++)
                                                                            {
                                                                                <div class="row">
                                                                                    @if (@Model.itemsWithConstrains[i].ItemCategories_lots[m].Lot_Committee_Result[a].List_Committee_Result_Conferm[b].IsAccepted == true)
                                                                                    {
                                                                                        <div class="col-md-10">مقبول</div>
                                                                                    }
                                                                                    else if (@Model.itemsWithConstrains[i].ItemCategories_lots[m].Lot_Committee_Result[a].List_Committee_Result_Conferm[b].IsAccepted == false)
                                                                                    {
                                                                                        <div class="col-md-10">مرفوض</div>
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        <div class="col-md-10">لم يتم العمل عليها</div>
                                                                                    }

                                                                                    <div class="col-md-10">@Model.itemsWithConstrains[i].ItemCategories_lots[m].Lot_Committee_Result[a].List_Committee_Result_Conferm[b].Employee_Name</div>

                                                                                    <div class="col-md-10">@Model.itemsWithConstrains[i].ItemCategories_lots[m].Lot_Committee_Result[a].List_Committee_Result_Conferm[b].Date</div>

                                                                                    <div class="col-md-10">@Model.itemsWithConstrains[i].ItemCategories_lots[m].Lot_Committee_Result[a].List_Committee_Result_Conferm[b].Notes</div>
                                                                                </div>
                                                                            }
                                                                        }
                                                                        else
                                                                        {
                                                                            <div class="row">
                                                                                <div class="col-md-10">لا يوجد نتائج للمساعدين</div>
                                                                            </div>

                                                                        }
                                                                    }
                                                                    else
                                                                    {
                                                                        <div class="row">
                                                                            <div class="col-md-10">لا يوجد مساعدين</div>
                                                                        </div>

                                                                    }
                                                                </td>
                                                            </tr>
                                                        }
                                                    }
                                                    else
                                                    {
                                                        <tr style="background-color: rgb(145, 214, 208); color: rgb(255, 255, 255); font-weight: bold; font-size: 16px;"
                                                            class="display-none toggle-div6-Lot_Result_@Model.itemsWithConstrains[i].ItemCategories_lots[m].ID_Lot">
                                                            <td colspan="12" style="font-size:inherit">لاتوجد معاينة</td>
                                                        </tr>
                                                    }
                                                }
                                                //if ()
                                                //{
                                                //    zxcv

                                                //}
                                                if (ViewBag.CommitteeTypeLst_Value == 13 || ViewBag.CommitteeTypeLst_Value == 0)
                                                {



                                                    if (Model.itemsWithConstrains[i].ItemCategories_lots[m].list_Committee_Sample_Lot.Count() > 0)
                                                    {
                                                        <tr style="background-color: rgb(145, 214, 208); color: rgb(255, 255, 255); font-weight: bold; font-size: 16px; "
                                                            class="display-none toggle-div6-Lot_Result_@Model.itemsWithConstrains[i].ItemCategories_lots[m].ID_Lot">
                                                            <td colspan="12" style="font-size:inherit">نتيجة سحب عينة لوط : @Model.itemsWithConstrains[i].ItemCategories_lots[m].Lot_Number</td>
                                                        </tr>
                                                        <tr class="display-none toggle-div6-Lot_Result_@Model.itemsWithConstrains[i].ItemCategories_lots[m].ID_Lot">
                                                            <th colspan="2" style=" background-color:rgb(145, 214, 208)!important">باركود</th>
                                                            <th colspan="2" style=" background-color:rgb(145, 214, 208)!important">نوع التحاليل</th>
                                                            <th colspan="3" style=" background-color:rgb(145, 214, 208)!important">نتيجة سحب الادمن</th>
                                                            <th colspan="3" style=" background-color:rgb(145, 214, 208)!important">نتيجة سحب المساعد</th>
                                                            <th colspan="2" style=" background-color:rgb(145, 214, 208)!important">موقف المعمل</th>
                                                        </tr>
                                                        for (int s = 0; s < Model.itemsWithConstrains[i].ItemCategories_lots[m].list_Committee_Sample_Lot.Count(); s++)
                                                        {
                                                            <tr class="display-none toggle-div6-Lot_Result_@Model.itemsWithConstrains[i].ItemCategories_lots[m].ID_Lot">
                                                                <td colspan="2">
                                                                    <a href="/LaboratoryResult/LaboratoryResult_Report/Index?barcode=@Model.itemsWithConstrains[i].ItemCategories_lots[m].list_Committee_Sample_Lot[s].Sample_BarCode">
                                                                        @Model.itemsWithConstrains[i].ItemCategories_lots[m].list_Committee_Sample_Lot[s].Sample_BarCode
                                                                    </a>
                                                                </td>
                                                                <td colspan="2">
                                                                    <div class="row"> <div class="col-md-12"><span class="labelspan">  التحليل</span></div></div>
                                                                    <div class="row"><div class="col-md-12"><span>@Model.itemsWithConstrains[i].ItemCategories_lots[m].list_Committee_Sample_Lot[s].Analysis_Name</span></div></div>
                                                                    <div class="row"><div class="col-md-12"><span class="labelspan">المعمل </span></div></div>
                                                                    <div class="row"><div class="col-md-12"><span>@Model.itemsWithConstrains[i].ItemCategories_lots[m].list_Committee_Sample_Lot[s].Lab_Name</span> </div></div>
                                                                </td>


                                                                <td colspan="4">
                                                                    <button type='button' class='quickview5' style="height: auto;color: white;background-color: #1e7c80;border: 2px solid #1e8084;box-shadow: 0 4px #1d9fa5; outline: none; color: white;margin-top: 5px;" data-toggle='modal'
                                                                            data-target='#mymodalemanexamination'
                                                                            data-samplesize="@Model.itemsWithConstrains[i].ItemCategories_lots[m].list_Committee_Sample_Lot[s].SampleSize"
                                                                            data-samplesatio="@Model.itemsWithConstrains[i].ItemCategories_lots[m].list_Committee_Sample_Lot[s].SampleRatio"
                                                                            data-withdrawdate="@Model.itemsWithConstrains[i].ItemCategories_lots[m].list_Committee_Sample_Lot[s].WithdrawDate"
                                                                            data-employeename="@Model.itemsWithConstrains[i].ItemCategories_lots[m].list_Committee_Sample_Lot[s].Employee_Name"
                                                                            data-notes="@Model.itemsWithConstrains[i].ItemCategories_lots[m].list_Committee_Sample_Lot[s].Notes"
                                                                            data-sylalkhatimanumber="@Model.itemsWithConstrains[i].ItemCategories_lots[m].list_Committee_Sample_Lot[s].Syl_ALkhatima_Number">
                                                                        @PlantQuar.WEB.Language.Resource_data1.Details
                                                                    </button>

                                                                </td>
                                                                <td colspan="2">
                                                                    @if (Model.itemsWithConstrains[i].ItemCategories_lots[m].list_Committee_Sample_Lot[s].List_Committee_Sample_Conferm.Count() > 0)
                                                                    {
                                                                        for (int sc = 0; sc < Model.itemsWithConstrains[i].ItemCategories_lots[m].list_Committee_Sample_Lot[s].List_Committee_Sample_Conferm.Count(); sc++)
                                                                        {

                                                                            <div class="row">

                                                                                @if (Model.itemsWithConstrains[i].ItemCategories_lots[m].list_Committee_Sample_Lot[s].List_Committee_Sample_Conferm[sc].IsAccepted == true)
                                                                                {
                                                                                    <div class="col-md-6"> مقبول</div>
                                                                                }
                                                                                else if (Model.itemsWithConstrains[i].ItemCategories_lots[m].list_Committee_Sample_Lot[s].List_Committee_Sample_Conferm[sc].IsAccepted == false)
                                                                                {
                                                                                    <div class="col-md-6"> مرفوض</div>
                                                                                }
                                                                                else
                                                                                {
                                                                                    <div class="col-md-6"> لا توجد بيانات</div>
                                                                                }

                                                                                <div class="col-md-6"></div>
                                                                            </div>
                                                                            <div class="row"><div class="col-md-10">@Model.itemsWithConstrains[i].ItemCategories_lots[m].list_Committee_Sample_Lot[s].List_Committee_Sample_Conferm[sc].Employee_Name</div></div>
                                                                            <div class="row"><div class="col-md-10">@Model.itemsWithConstrains[i].ItemCategories_lots[m].list_Committee_Sample_Lot[s].List_Committee_Sample_Conferm[sc].Date</div> </div>

                                                                        }
                                                                    }
                                                                    else
                                                                    {
                                                                        <div class="row">
                                                                            <div class="col-md-6">لا توجد نتائج</div>
                                                                        </div>
                                                                    }
                                                                </td>
                                                                <td colspan="2">
                                                                    @if (Model.itemsWithConstrains[i].ItemCategories_lots[m].list_Committee_Sample_Lot[s].IsAccepted != null)
                                                                    {
                                                                        if (Model.itemsWithConstrains[i].ItemCategories_lots[m].list_Committee_Sample_Lot[s].IsAccepted == true)
                                                                        {
                                                                            <div class="col-md-6"> مقبول</div>
                                                                        }
                                                                        else if (Model.itemsWithConstrains[i].ItemCategories_lots[m].list_Committee_Sample_Lot[s].IsAccepted == false)
                                                                        {
                                                                            <div class="col-md-6"> مرفوض</div>
                                                                        }
                                                                        else
                                                                        {
                                                                            <div class="col-md-6"> لا توجد نتائج</div>
                                                                        }
                                                                        <div class="col-md-6"> @Model.itemsWithConstrains[i].ItemCategories_lots[m].list_Committee_Sample_Lot[s].RejectReason_Ar</div>
                                                                        <div class="col-md-6"> @Model.itemsWithConstrains[i].ItemCategories_lots[m].list_Committee_Sample_Lot[s].RejectReason_Ar</div>
                                                                        @*<div class="col-md-6"> @Model.itemsWithConstrains[i].ItemCategories_lots[m].list_Committee_Sample_Lot[s].Imge_SampleLabResult</div>*@

                                                                        <div class="col-md-6">
                                                                            <input type="button" class="Show_Imge" data-id="@Model.itemsWithConstrains[i].ItemCategories_lots[m].list_Committee_Sample_Lot[s].Imge_SampleLabResult"
                                                                                   value="عرض الصورة" />

                                                                            @*<a href="@Model.itemsWithConstrains[i].ItemCategories_lots[m].list_Committee_Sample_Lot[s].Imge_SampleLabResult" target="_blank"> الصورة </a>*@


                                                                        </div>
                                                                    }
                                                                    else
                                                                    {
                                                                        <div class="col-md-6"> لا توجد نتائج</div>
                                                                    }

                                                                </td>


                                                            </tr>
                                                        }
                                                    }
                                                    else
                                                    {
                                                        <tr style="background-color: rgb(145, 214, 208); color: rgb(255, 255, 255); font-weight: bold; font-size: 16px;"
                                                            class="display-none toggle-div6-Lot_Result_@Model.itemsWithConstrains[i].ItemCategories_lots[m].ID_Lot">
                                                            <td colspan="12" style="font-size:inherit">لايوجد سحب</td>
                                                        </tr>
                                                    }
                                                }
                                            }


                                            <tr class="display-none   toggle-div4-@i@i@i@i">
                                                <td colspan="6">
                                                    <label>@PlantQuar.WEB.Language.Resource_data1.CommitteeType </label>

                                                </td>
                                                <td colspan="6"></td>
                                            </tr>
                                            <tr class="display-none   toggle-div5-@i@i@i@i">
                                                <td colspan="6"></td>
                                                <td colspan="6"></td>
                                            </tr>


                                        </tbody>
                                    </table>
                                    <br />
                                    <hr style="border-top: 1px solid #848484;" />
                                    <br />
                                }
                            }

                        </div>
                    </div>
                </div>




                <div class="row">
                    <div class="col-md-4">
                    </div>
                    <div class="col-md-4">
                    </div>
                    @*<div class="col-md-4" style="text-align:center">
                            <input type="button" class=" btn btn-primary btnNext float-left" id="messagedata" value="@PlantQuar.WEB.Language.Resource_data1.Save">

                        </div>*@
                </div>
            </div>
        </div>
    </div>
</div>
<hr />
<div class="row">

    <label class="tapp-title">
        التأشيرة
    </label>

</div>

<br />
<div class="row">
    <div class="col-md-12">
        <a href='/Committees/FeesTotalResult/Index?ImCheckRequest_Number=@Model.ImCheckRequest_Number' class=" btn btn-primary button" style="background-color: #1f6c6f;
    border-color: #1f6c6f;"> عرض الرسوم</a>


</div>

    </div>
    <br />
    <div class="row">
        <div class="col-md-4">
            <input type="text" value="نص التأشيرة" readonly="" class="form-control " width="100" autocom />
            <select class="form-control" id="Visa_Lst"></select>

            <textarea id="visalab" class="form-control " width="100" autocom disabled></textarea>
            <br />
            @*<input type="button" id="Btn_Visa" onClick="reply_Insert_Visa(this)" value="حفظ التأشيرة" />*@
            <button type='button' class='quickview10' style="height: auto;color: white;background-color: #1e7c80;border: 2px solid #1e8084;box-shadow: 0 4px #1d9fa5; outline: none; color: white;margin-top: 5px;" data-toggle='modal'
                    data-target='#mytextVisa'>
                حفظ التأشيرة
            </button>

        </div>
        <div class="col-md-8">

            <table id="Tab_Visa" class="table table-bordered table-striped dataTable" role="grid" style="padding:5px; width:100%">
                <thead>
                    <tr>

                        <th>  نص التأشيرة </th>
                        <th>التاريخ </th>
                        <th>اسم الموظف </th>

                    </tr>
                </thead>
                <tbody id="myTable2">
                    @if (Model.CheckRequest_Visa != null)
                    {
                        for (int cm = 0; cm < Model.CheckRequest_Visa.Count(); cm++)
                        {
                            <tr>
                                <td>
                                    <textarea style="width: 100%;" rows="4" disabled>
                            @Model.CheckRequest_Visa[cm].Visa_Result_Name
                                </textarea>
                                </td>

                                <td>@Model.CheckRequest_Visa[cm].Date_Visa.Value.ToString("dd/MM/yyyy")</td>

                                <td>@Model.CheckRequest_Visa[cm].Visa_Result_Employee_Name</td>
                            </tr>
                        }
                    }

                </tbody>
            </table>

        </div>
    </div>
    <hr />

    <div class="row">
        <div class="col-md-4">
            @*noura*@
            <select class="form-control" id="FinalResult" name="FinalResult">
                <option value="0">أختار</option>
                <option id="FinalResult_worked" name="الطلب يعمل" value="1">الطلب يعمل</option>
                @if (Model.Count_Lots == 0)
                {
                    <option id="FinalResult_notworked" name="الطلب لا يعمل" value="2">الطلب لا يعمل</option>
                }
            </select>

            <select class="form-control" id="FinalResultList" name="FinalResultList"></select>
            <br />
            @*<input type="button" id="Btn_Final_Result" onClick="reply_Insert_Final_Result(this)" value="حفظ الموقف النهائى" />*@
            <button type='button' class='quickview17' style="height: auto;color: white;background-color: #1e7c80;border: 2px solid #1e8084;box-shadow: 0 4px #1d9fa5; outline: none; color: white;margin-top: 5px;" data-toggle='modal'
                    data-target='#mytextFinalRequest'>
                حفظ الموقف النهائى
            </button>
            @*noura*@

        </div>
        <div class="col-md-8">

            <table id="TblFinalResult" class="table table-bordered table-striped dataTable" role="grid" style="padding:5px; width:100%">
                <thead>
                    <tr>
                        <th>اسم الموظف </th>
                        <th>تاريخ الطلب </th>
                        <th>حالة الطلب </th>
                        <th>الموقف النهائي للطلب </th>
                    </tr>
                </thead>
                <tbody id="myTable3">
                    @if (Model.FinalResults != null)
                    {
                        for (int cm = 0; cm < Model.FinalResults.Count(); cm++)
                        {
                            <tr>
                                <td>@Model.FinalResults[cm].Final_Result_Employee_Name</td>
                                <td>@Model.FinalResults[cm].DateFinalResult.Value.ToString("dd/MM/yyyy")</td>
                                @if (Model.FinalResults[cm].Final_Result_Status == true)
                                {
                                    <td>الطلب يعمل</td>
                                }
                                else
                                {
                                    <td>الطلب لا يعمل</td>
                                }
                                <td>@Model.FinalResults[cm].Final_Result_Name</td>
                            </tr>
                        }
                    }
                    @*<tr>
                            <td>الادارة المركزية للحجر الزراعى (بنوك)</td>
                            <td>9/9/2021</td>
                            <td>منى فايز غالى تادرس</td>

                        </tr>*@

                </tbody>
            </table>

        </div>

    </div>

    @if (Model.Count_Lots == 0)
    {

        <br />
        <hr />
        <div class="row">
            <div class="col-md-12">
                <div class="col-md-4">
                    @*<center> <input type="button" class=" btn btn-primary btnNext " id="" value=""></center>*@
                    <center><a href='/IM_Check_Requst_Report/ChooseAcceptedReport/Index?ImCheckRequest_Number=@Model.ImCheckRequest_Number' class=" btn btn-primary button">طباعة إستمارة الفحص</a></center>
                </div>
                <div class="col-md-4">
                    <center>
                        @*<input type="button" class=" btn btn-primary btnNext " id="" value="طباعة إخطار الرفض">*@
                        <center><a href='/Committees/RefuseResultReport/Index' class=" btn btn-primary button">طباعة إخطار الرفض</a></center>
                    </center>
                </div>
                <div class="col-md-4" style="text-align:center">
                    <center>
                        @*<input type="button" class=" btn btn-primary btnNext " id="" value=" عرض الرسوم">*@
                        <center>
                            @*<a href='/Committees/FeesTotalResult/Index' class=" btn btn-primary button"> عرض الرسوم</a>*@
                            <a href='/Committees/FeesTotalResult/Index?ImCheckRequest_Number=@Model.ImCheckRequest_Number' class=" btn btn-primary button"> عرض الرسوم</a>
                        </center>
                    </center>
                </div>
            </div>
        </div>
    }



    <!-- Modal Details -->
    <div id="mymodalemanexamination" class="modal fade" role="dialog">
        <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    @*<button type="button" class="close" data-dismiss="modal">&times;</button>*@
                    <h4 class="modal-title">@PlantQuar.WEB.Language.Resource_data1.Details </h4>
                </div>
                <div class="modal-body" id="modaldetails">

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default " data-dismiss="modal">@PlantQuar.WEB.Language.Resource_data1.Close</button>
                </div>
            </div>

        </div>
    </div>

    @*noura*@

    <div id="mytextVisa" class="modal fade" role="dialog">
        <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">

                    <h4 class="modal-title">لتاكيد إضافة تاشيرة </h4>
                </div>
                <div class="modal-body" id="modaldetails">
                    هل تريد إضافة هذه التاشيرة؟؟
                </div>
                <div class="modal-footer" style="text-align:center">
                    <button type="button" class="btn btn-default " onClick="reply_Insert_Visa(this)" data-dismiss="modal">نعم</button>
                    <button type="button" class="btn btn-default " data-dismiss="modal">لا</button>
                </div>
            </div>

        </div>
    </div>

    <div id="mytextFinalRequest" class="modal fade" role="dialog">
        <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">

                    <h4 class="modal-title">لتاكيد إضافة موقف الطلب </h4>
                </div>
                <div class="modal-body" id="modaldetails">
                    هل تريد إضافة هذه الموقف؟؟
                </div>
                <div class="modal-footer" style="text-align:center">
                    <button type="button" class="btn btn-default " onClick="reply_Insert_Final_Result(this)" data-dismiss="modal">نعم</button>
                    <button type="button" class="btn btn-default " data-dismiss="modal">لا</button>
                </div>
            </div>

        </div>
    </div>


    <!--End_Modal Details -->

    @section scripts{

        <script type="text/javascript">
           $(document).ready(function () {
             $.ajax(
                {
                    url: '@Url.Action("ItemShortName_AddEDIT", "ImCommittee_Final_Result", new { area = "Committees" })',
                    type: 'Post',
                    success: function (data) {
                        $('#itemShortNameLst').empty();
                          $('#itemShortNameLst').append($('<option />').val(0).text(" أختار"));
                        $.each(data.Options, function (i, index) {

                            $('#itemShortNameLst').append($('<option />').val(index.Value).text(index.DisplayText));
                        }); //each
                    } //success
                });//ajax
        });
        $('#itemShortNameLst').on("change", function () {

            $.ajax(
                {
                    url: '@Url.Action("ItemLotName_AddEDIT", "ImCommittee_Final_Result", new { area = "Committees" })',
                    type: 'Post',
                    data: { ItemShortName_ID: $('#itemShortNameLst').val() },
                    success: function (data) {
                        $('#Lots_itemShortNameLst').empty();
                        $('#Lots_itemShortNameLst').append($('<option />').val(0).text("أختار اللوط"));
                        $.each(data.Options, function (i, index) {
                            $('#Lots_itemShortNameLst').append($('<option />').val(index.Value).text(index.DisplayText));
                        }); //each
                    } //success
                });//ajax
        });
        //************************ESLAM*********************//
            ///SEARCH




        //$('#itemShortNameLst').change(function () {

        //    $("#itemTable tbody").empty();

        //    if ($('#itemShortNameLst').val() != 0) {
        //        btn_Approved_Click();
        //    } else {
        //        alert("أختار المنتج");
        //    }


        //});
        $('#btn_Approved').click(function () {

            $("#itemTable tbody").empty();


            if ($('#itemShortNameLst').val() != 0
                ||( $('#Lots_itemShortNameLst').val() != 0 )
                || $('#CommitteeTypeLst').val() != 0 ) {
                 //  alert('m');
              location.href = "/Committees/ImCommittee_Final_Result/Index?requestId=@Model.Im_CheckRequest_ID&Outlet_ID=@Model.OutLet_ID&item_ShortName_ID="+$('#itemShortNameLst').val()+"&Lots_itemShortName_ID="+$('#Lots_itemShortNameLst').val()+"&CommitteeTypeLst_ID="+$('#CommitteeTypeLst').val()

               } else {
                 //  alert('s');
                                location.href = "/Committees/ImCommittee_Final_Result/Index?requestId=@Model.Im_CheckRequest_ID&Outlet_ID=@Model.OutLet_ID"

            }


        });


       @*// btn_Approved_Click(1);

    function btn_Approved_Click() {


        var itemShortNameLst = $('#itemShortNameLst').val();
        var lots_itemShortNameLst = $('#Lots_itemShortNameLst').val();
       // alert("button click" + itemShortNameLst + "=========" + lots_itemShortNameLst);


                   $.ajax(
            {
                           url: '@Url.Action("Index", "ImCommittee_Final_Result", new { area = "Committees" })',

                 data: {
                     requestId:344,
                     Outlet_ID:933,
                     item_ShortName_ID:22
                    },

                           success: function (data) {
                               location.href = "/Committees/ImCommittee_Final_Result/Index?requestId="+requestId+"&Outlet_ID=933&item_ShortName_ID=6"
                           }
            });
    }*@



             //************************ESLAM*********************//

   $(document).ready(function () {
             $.ajax(
                {
                    url: '@Url.Action("Visa_AddEDIT", "Im_Visa_Data", new { area = "DE_Import" })',
                    type: 'Post',
                    success: function (data) {
                        $('#Visa_Lst').empty();
                          $('#Visa_Lst').append($('<option />').val(0).text(" أختار"));
                        $.each(data.Options, function (i, index) {

                            $('#Visa_Lst').append($('<option />').val(index.Value).text(index.DisplayText));
                        }); //each
                    } //success
                });//ajax
   });
        $('#Visa_Lst').on("change", function () {
            var VisaResult = document.getElementById("Visa_Lst").value;
           // alert(VisaResult);
             $.ajax(
                {
                    url: '@Url.Action("VisaLabResult_AddEDIT", "ImCommittee_Final_Result", new { area = "Committees" })',
                    type: 'Post',
                     data: { VisaResult: VisaResult },
                     success: function (data) {
                         $("#visalab").empty();
                         $("#visalab").append(data.Options.Description_Ar);

        //var row = "<tr>";
        //$.each(data, function(i, val) {
        //    row += "<td>" + data.Options + Description_Ar+"</td><td>" + data.Options.Description_Ar + "</td><td>" + data.Options.Description_Ar + "</td>";
        //});
        //row += "</tr>";
        //$("#Tab_Visa").append(row);

                         //success done
                         // $("#visalab").append(data);
                     }//success


                 });//ajax

        });
         //noura


        $('#FinalResult').on("change", function () {
            var FinalResult = document.getElementById("FinalResult").value;

            $.ajax(
                {
                    url: '@Url.Action("FinalResult_AddEDIT", "Im_FinalResult_Data", new { area = "DE_Import" })',
                    type: 'Post',
                    data: { FinalResult: $('#FinalResult').val() },
                    success: function (data) {
                        $('#FinalResultList').empty();
                        $('#FinalResultList').append($('<option />').val(0).text("أختار"));
                        $.each(data.Options, function (i, index) {
                            $('#FinalResultList').append($('<option />').val(index.Value).text(index.DisplayText));
                        }); //each
                    } //success
                });//ajax
        });



        </script>

        <script>

            var list = [];


        function MyFunction() {
            $("#Farm_Constrain_TextTable tbody").empty();
            var EmplyeeName = document.getElementById("Employee_name").value;
            var Emplyee_No = $('#Employee_No').val();
            var OutLet_ID = $('#OutLet_ID').val();
            var EmplyeeNo;
           // //alert(Emplyee_No)
            if (Emplyee_No === "") {
                 EmplyeeNo = 0;

            }
            else {
                 EmplyeeNo = parseInt($('#Employee_No').val());

            }
         //  //alert(EmplyeeNo);


              $.ajax({
                        url: '@Url.Action("GetPR_User_Id", "ImCommittee_New")',
                        type: "POST",


                  data: { FullName: EmplyeeName, EmplyeeNo: EmplyeeNo,OutLet_ID:OutLet_ID},



                  success: function (data) {



                            for (var i = 0; i < data.length; i++) {
                                var item = data[i];
                                carName = 1;
                                $("#Farm_Constrain_TextTable tbody").append("<tr>" +

                                    "<td>  " + item.Value + "  </td>"
                                    +"<td>" + item.DisplayText + "</td>" +
                                    "<td>  " + item.Adress + "  </td>"
                                    + "<td>" + item.JobTitleName + "</td>"


                                    //+'<td><input type="radio" id="chckBox_' + i + '" class="change-selector" value="' + result[i].Value + '" name="hello"   )"/></td>'
                                    + '<td><input type="checkbox" id="chckBox_' + i + '' + i + '" class="chckClass_' + i + '" value="' + data[i].Value + '" Name="' + data[i].DisplayText + '"  onchange="helloo(this)" " /></td>'
                                 // +  "<td>" + item.Value + "</td>" +



                                    + "</tr>");

                            }



                    },
                        error: function (xhr, status, error) {

                    }
              });
            let checkboxes = $("input[type='checkbox']");
            selectedCboxes = Array.prototype.slice.call(checkboxes).filter(ch => ch.checked == true);
            //console.log(checkboxes);
        }

            function DeleteRow(element) {
                ////alert(element.name);
                //console.log(element);
                var table = document.getElementById("myTable");

                var c = '#id' + element.name + '';
                $(c).remove();
            }
        function helloo(element) {
           // //alert(element.value);


            if (element.checked) {
                //document.getElementById("myTable").insertRow(-1).innerHTML = '<td id=' + element.value + '>' + element.name
                //    + '</td><td>' + element.value + '</td>';



                //debugger;
                var table = document.getElementById("myTable2");

                var rowCount = table.rows.length;
                var row = table.insertRow(rowCount);
                row.id = 'id'+element.value;
                row.insertCell(0).innerHTML = element.name;
                row.insertCell(1).innerHTML = element.value;
                row.insertCell(2).innerHTML =
                    '<td><input type="radio" id="chckBox_' + element.value + '" class="change-selector" value="' + element.value + '" name="hello"   )"/></td>';
                row.insertCell(3).innerHTML =
                    '<td><a href="#" onclick="DeleteRow(this)" name="' + element.value + '">Delete</a></td>';
            }
            else {
                var c = '#id' + element.value + '';
                $(c).remove();

            }


            }


        function saveList() {

                var selectedOption = $("input:radio[name=hello]:checked").val()
                // //alert("Your are a - " + selectedOption);
                if (typeof selectedOption !== "undefined") {

                    var rows = document.getElementById("myTable2").rows;
                    for (var i = 0, ceiling = rows.length; i < ceiling; i++) {
                        cells = rows[i].getElementsByTagName('td');
                        Employee_name = cells[0].innerHTML;
                        Employee_Id = cells[1].innerHTML;


                        var id = parseInt(Employee_Id);
                        if (id == selectedOption) {
                            ISAdmin = true;
                            ////alert('d');
                            //console.log(selectedOption + ',,,,' + Employee_Id);
                        }
                        else {
                            ISAdmin = false;
                        }




                        //<th hidden>EmployeeNo</th>
                        //<th hidden>isAdmin</th>
                        //ISAdmin
                        //Employee_no
                        list.push({ Employee_name: Employee_name, Employee_Id: Employee_Id, ISAdmin: ISAdmin });

                    }
                    return list;
                }
                else {
                    return null;
                }

                //sayed
                      var selectedOption = $("input:checkbox[name=Checkbox1]:checked").val()
                // //alert("Your are a - " + selectedOption);
                if (typeof selectedOption !== "undefined") {

                    var rows = document.getElementById("myTable2").rows;
                    for (var i = 0, ceiling = rows.length; i < ceiling; i++) {
                        cells = rows[i].getElementsByTagName('td');
                        Employee_name = cells[0].innerHTML;
                        Employee_Id = cells[1].innerHTML;


                        var id = parseInt(Employee_Id);
                        if (id == selectedOption) {
                            ISAdmin = true;
                            ////alert('d');
                            //console.log(selectedOption + ',,,,' + Employee_Id);
                        }
                        else {
                            ISAdmin = false;
                        }
                        list.push({ Employee_name: Employee_name, Employee_Id: Employee_Id, ISAdmin: ISAdmin });
                    }
                    return list;
                }
                else {
                    return null;
                }
                //end sayed

            }
        </script>

        <script type="text/javascript">
                $(document).ready(function () {
                    $("#CommitteeType_ID").attr("class", "form-control");
                 //   GetCheckRequest_Number_Data();
                })
        $(function () {
        @*$('#Employee_AddEDIT').jtable({
            title: '@PlantQuar.WEB.Language.Resource_data1.CommitteMember',
            paging: true,
            pageSize: 10,
            sorting: true,
            selecting: true, //Enable selecting
            multiselect: true, //Allow multiple selecting
            selectingCheckboxes: true, //Show checkboxes on first column
            columnResizable: true,
            columnSelectable: true,
            saveUserPreferences: true,
                actions: {
               //listAction: '/Committee/ListEmployee',
                    listAction: function (postData, jtParams) {
                        return $.Deferred(function ($dfd) {
                            $.ajax({
                                url: '/Committee/ListEmployee?Employee_name=' + $("#Employee_name").val() + '&Employee_No=' + $("#Employee_No").val() + '&jtStartIndex=' + jtParams.jtStartIndex + '&jtPageSize=' + jtParams.jtPageSize + '&jtSorting=' + jtParams.jtSorting,
                                type: 'POST',
                                dataType: 'json',
                                data: postData,
                                success: function (data) {
                                    if (data.Result == '-1') {

                                      //  $dfd.resolve(null);
                                    }
                                    else {
                                        $.each(data.Records, function (index, r) {
                                            var row = '<tr class="jtable-data-row jtable-row-even"><td class="jtable-selecting-column"><input type="checkbox"></td><td>' + r.DisplayText + '</td><td>' +  r.Value+ '</td></tr>';
                                            $("#Employee_AddEDIT->tbody").append(row);
                                        });
                                          $dfd.resolve(data);
                                        //remove dublication
                                    }
                                },
                                error: function () {
                                  //  $dfd.reject();
                                }
                            });
                        });
                    }
                },
            fields: {
                Value: {
                    key: true,
                    create: false,
                    edit: false,
                    list: false
                },
                Employee_name: {
                    title: ' @PlantQuar.WEB.Language.Resource_data1.Member',
                    inputClass: 'validate[required]',
                },
                Employee_Id: {
                    title: '@PlantQuar.WEB.Language.Resource_data1.MemberNumber',
                    inputClass: 'validate[required]',
                },
                ISAdmin: {
                    title: ' @PlantQuar.WEB.Language.Resource_data1.isadmin',

                    //inputClass: 'validate[required]',
                    //type: 'checkbox',
                    display: function (data) {
                        //debugger;
                        return " <input type='checkbox' id='isadmin_" + data.record.Employee_Id + "' /> "
                    }

                    },
            },
            formCreated: function (event, data) {

                if (data.formType == "create") {
                    $(".ui-dialog-title").text("@PlantQuar.WEB.Language.Resource_data1.Add");
                }
                else {
                    $(".ui-dialog-title").text("@PlantQuar.WEB.Language.Resource_data1.Edit");
                }
            },
            formSubmitting: function (event, data) {
                return data.form.validationEngine('validate');
            },
            formClosed: function (event, data) {
                data.form.validationEngine('hide');
                data.form.validationEngine('detach');
                $(".ui-dialog-title").text("@PlantQuar.WEB.Language.Resource_data1.Delete");
            },
             recordAdded: function (event, data) {
                    //Mah+Ag 17-4-2019 change display message
                    alertify.success("@PlantQuar.WEB.Language.Resource_data1.Save_Insert");
                },
                recordUpdated: function (event, data) {
                                        //Mah+Ag 17-4-2019 change display message
                    alertify.success("@PlantQuar.WEB.Language.Resource_data1.Save_Update");
                },
            recordDeleted: function (event, data) {
                                        //Mah+Ag 17-4-2019 change display message
                    alertify.success("@PlantQuar.WEB.Language.Resource_data1.Save_Delete");
                },
        });*@

        $(".jtable-toolbar-item-add-record .jtable-toolbar-item-text").text("@PlantQuar.WEB.Language.Resource_data1.Add");

        //Date&Time Form
        $("#Delegation_Date").datepicker(
            {
                    dateFormat: 'yy-mm-dd',
                changeYear: true,
                changeMonth: false,
                minDate: 0,
                yearRange: "-100:+20",


            }
        );
            //$('#StartTime,#EndTime').timepicker({
            //    timeFormat: 'HH:mm',
            //    interval: 60,
            //    minTime: '10',
            //    maxTime: '06:00pm',
            //    defaultTime: '11:00',
            //    startTime: '10:00',
            //    dynamic: false,
            //    dropdown: true,
            //    scrollbar: true,
            //    });
                });

        String.prototype.compose = (function () {
            var re = /\{{(.+?)\}}/g;
            return function (o) {
                return this.replace(re, function (_, k) {
                    return typeof o[k] != 'undefined' ? o[k] : '';
                });
            }
                }());

                $("#CommitteeType_ID").change(function () {
                    GetCheckRequest_Number_Data(true);
                });
        //CheckRequest_Number save Committee
                        function GetCheckRequest_Number_Data(isChange=false) {


            CommitteeType_ID = $("#CommitteeType_ID").val()
                if ( CommitteeType_ID == "")
            {
                    alertify.error("يجب اختيار نوع اللجنة");
                return false;
            }
            $.ajax(
                {
                    url: "/Committee/SaveCommittee",
                    type: "POST",
                    data: {
                        CheckRequest_Number: $("#CheckRequest_Number").val(),
                        CommitteeType_ID: CommitteeType_ID
                    },
                    success: function (res) {

                        //reset data
                        //   $("#CommitteeType_ID").val(null);
                        $("#Check_Date").val(null);
                        $("#Delegation_Date").val(null);
                        $("#StartTime").val(null);
                        $("#EndTime").val(null);
                        $("#Employee_AddEDIT").hide();
                        $("#CheckRequest_Id").val(0);
                        if (res.Result == 1) {
                            //set data found
                            var Request_committe = res.Request_committe;

                            if (Request_committe.Check_Date != null) {
                                $("#Check_Date").val($.datepicker.formatDate('yy-mm-dd', (new Date(parseInt(Request_committe.Check_Date.substr(6))))));
                            } if (Request_committe.Delegation_Date != null) {
                                $("#Delegation_Date").val($.datepicker.formatDate('yy-mm-dd', (new Date(parseInt(Request_committe.Delegation_Date.substr(6))))));
                            }$("#StartTime").val(Request_committe.StartTime);
                            $("#EndTime").val(Request_committe.EndTime);
                            $("#Employee_AddEDIT").show();
                            $("#submitValue").removeAttr("disabled");
                            //get check_request id
                            $("#CheckRequest_Id").val(Request_committe.CheckRequest_Id);
                            var Committe_Id = Request_committe.Committe_Id ;
                            $("#Committe_Id").val(Request_committe.Committe_Id);
                        if (Committe_Id == -1)
                            {
                            //no committe is found
                            }
                        else if (Committe_Id >0) {
                                    //there is a committe for the current request
                            //edit data and display employee data
                            var Employee_list = Request_committe.Employee_list;
                            //Value    Employee_name    Employee_Id

                            var tbody = $('#Employee_AddEDIT').children('tbody');
                            var table = tbody.length ? tbody : $('#Employee_AddEDIT').children('tbody');
                            //19-3-2020 fz clear table body
                                $('#Employee_List  tbody').empty();
                            $.each(Employee_list, function (index, r) {
                            //     var row = '<tr class="jtable-data-row jtable-row-even jtable-row-selected"><td class="jtable-selecting-column"><input type="checkbox" checked></td><td>' + r.Employee_name + '</td><td>' + r.Employee_Id + '</td></tr>';
                                var row = ' <tr class="jtable-data-row-selected"><td class="jtable-selecting-column"><input type="checkbox" checked></td><td>' + r.Employee_Id + '</td><td>' + r.Employee_name + '</td><td>' + r.Employee_Id + '</td></tr>';
                                $("#Employee_AddEDIT tbody").append(row);
                            });
                                }
                        }
                        else {

                            $("#submitValue").attr("disabled", true);
                            alertify.error("خطأ فى رقم طلب الفحص");
                        }
                    }
                });
        }
        //btn_Search
                var arrayRecords = new Array();
                var Admin_List = [];
                var admin_index = 0;
                var is_Admin = 0;


         ///////////////////////////////////////////////Next 1

        $('#Next1').click(function (e) {


            var CommitteeType_ID = $("#CommitteeType_ID").val();
            Delegation_Date = $("#Delegation_Date").val();
            StartTime = $("#StartTime").val();
            EndTime = $("#EndTime").val();


            if (Delegation_Date == ""
                || StartTime == "" || EndTime == "") {
                alertify.error("يجب استكمال البيانات ");
                return false;
            }
            if (StartTime > EndTime) {

                alertify.error(" يجب ان يكون توقيت النهاية اكبر من توقيت البداية ");
                return false;
            }

         $.ajax({
                type: "POST",
                url: "/ImCommittee_New/Save_Committe",
                dataType: "json",
                //data: dataToSend,
                data: JSON.stringify(
                    {
                        //dataToSend: employees,
                        //isAdmins: Admin_List,

                        CheckRequest_Id: $("#CheckRequest_Id").val(),

                        CommitteeType_ID: CommitteeType_ID,
                        Check_Date: $("#Check_Date").val(),
                        Delegation_Date: $("#Delegation_Date").val(),
                        StartTime: $("#StartTime").val(),
                        EndTime: $("#EndTime").val(),

                    }),

                contentType: "application/json; charset=utf-8",
             success: function (data) {

                 if (data == "Exist") {
                    // //alert("Committee Inserted before")

                     $('.nav-tabs > .active').next('li').find('a').trigger('click');
                 }

                    else {


                        $("#Check_Date").val(null);
                        $("#Delegation_Date").val(null);
                        $("#StartTime").val(null);
                        $("#EndTime").val(null);

                        $("#CheckRequest_Id").val(0);

                      //  $("#CheckRequest_Id").val(0);
                        //$("#Committe_Id").val(data),

                    }
                }
            });


        });


        //// Next_empploy
          $('#Next_empploy').click(function (e) {


            //  var Committe_I = 161;
              var commId = $("#Committe_Id").val();
         //     //alert(commId);
                var employees = saveList();
                if (employees == null) {
                    alertify.error("يجب اختيار  ادمن ");
                    return false;
                }


                $('#Employee_List  tbody').empty();

                var CommitteeType_ID = $("#CommitteeType_ID").val();
                Delegation_Date = $("#Delegation_Date").val();
                StartTime = $("#StartTime").val();
                EndTime = $("#EndTime").val();


                if (Delegation_Date == ""
                        /*|| StartTime == "" || EndTime == ""*/) {
                    alertify.error("يجب استكمال البيانات ");
                    return false;
                }
                if (StartTime > EndTime) {

                    alertify.error(" يجب ان يكون توقيت النهاية اكبر من توقيت البداية ");
                    return false;
                }
                            $.ajax({
                                type: "POST",
                                url: "/ImCommittee_New/Save_Employee",
                                dataType: "json",
                                //data: dataToSend,
                                data: JSON.stringify(
                                    {
                                        dataToSend: employees,
                                        //isAdmins: Admin_List,

                                        CheckRequest_Id: $("#CheckRequest_Id").val(),
                                        Committe_Id:$("#Committe_Id").val(),
                                        CommitteeType_ID: CommitteeType_ID,
                                        Check_Date: $("#Check_Date").val(),
                                        Delegation_Date: $("#Delegation_Date").val(),
                                        StartTime: $("#StartTime").val(),
                                        EndTime: $("#EndTime").val(),

                                    }),
                                contentType: "application/json; charset=utf-8",
                                success: function (data) {
                                    if (data == "SavedEmpolyee") {


                                            $('.nav-tabs > .active').next('li').find('a').trigger('click');
                                    } else {
                                         $("#Check_Date").val(null);
                                    $("#Delegation_Date").val(null);
                                    $("#StartTime").val(null);
                                    $("#EndTime").val(null);
                                  //  $("#Employee_AddEDIT").hide();
                                        $("#CheckRequest_Id").val(0);
                                        $("#Committe_Id").val(data);

                                  //  window.location = '/Im_CheckRequests/List_ImCheckRequest/Index';
                                    }

                                }
                            });

            });



        $(function () {

                $('#ShiftsAddEdit').jtable({
                    title: '@PlantQuar.WEB.Language.Resource_data1.shiftTiming',
                    paging: true,
                    pageSize: 10,
                    sorting: true,
                    columnResizable: true,
                    columnSelectable: true,
                    saveUserPreferences: true,
                    actions: {
                        listAction: 'listshiftTiming',
                        createAction: 'CreateshiftTiming',
                        updateAction: 'UpdateshiftTiming',
                        deleteAction: 'DeleteshiftTiming',
                    },
                    fields: {
                        ID: {
                            key: true,
                            create: false,
                            edit: false,
                            list: false
                        },

                        ShiftTiming_ID: {
                            title: '@PlantQuar.WEB.Language.Resource_data1.shiftTiming',
                            inputClass: 'validate[required]',
                            options: function (data) {
                                return '../../Committees/Committee/getShiftTiming_Lst';
                            },
                        },
                        money: {
                            title: 'money',
                            inputClass: 'validate[notrequired]',
                            type: 'text',
                        },
                        Count: {
                            title: '@PlantQuar.WEB.Language.Resource_data1.DaysNumber',
                            inputClass: 'validate[required]',
                            type: 'text',
                        },


                    },
                    formCreated: function (event, data) {

                        //$("#Edit-Im_RequestCommittee_ID").val(@Session["reqComm_ID"]);

                        $("#Edit-ShiftTiming_ID").change(function () {
                             $.ajax(
                {
                    url: '@Url.Action("getShiftTiming_Mony", "Committee", new { area = "Committees" })',
                                     type: 'Post',
                    //shiftId
                                     data: { shiftId: $(this).val() },
                    success: function (data) {
                        if (data.Options != null) {
                            $("#Edit-money").val(data.Options);
                        }

                    } //success
                 });//ajax
                        });
                     //   $('.jtable-input-field-container:nth-of-type(1)').hide();
                        $('#Edit-money').attr('readonly', 'readonly');
                        $('#Edit-Count').attr('type', 'number');

                        if (data.formType == "create") {
                            $(".ui-dialog-title").text("@PlantQuar.WEB.Language.Resource_data1.Add");
                        }
                        else {
                            $(".ui-dialog-title").text("@PlantQuar.WEB.Language.Resource_data1.Edit");
                        }
                    },
                    formSubmitting: function (event, data) {
                        //if ($("#Committe_Id").val() == 0) {
                        //    return false;
                        //    //alert("save first")
                       // }
                        //return data.form.validationEngine('validate');
                    },
                    formClosed: function (event, data) {
                        data.form.validationEngine('hide');
                        data.form.validationEngine('detach');
                        $(".ui-dialog-title").text("@PlantQuar.WEB.Language.Resource_data1.Delete");
                    },
                    recordAdded: function (event, data) {
                        //Mah+Ag 17-4-2019 change display message
                        alertify.success("@PlantQuar.WEB.Language.Resource_data1.Save_Insert");
                    },
                    recordUpdated: function (event, data) {
                        //Mah+Ag 17-4-2019 change display message
                        alertify.success("@PlantQuar.WEB.Language.Resource_data1.Save_Update");
                    },
                    recordDeleted: function (event, data) {
                        //Mah+Ag 17-4-2019 change display message
                        alertify.success("@PlantQuar.WEB.Language.Resource_data1.Save_Delete");
                    },
                });
                $('#ShiftsAddEdit').jtable('load', { Im_RequestCommittee_ID: '@Session["reqComm_ID"]' });


                $(".jtable-toolbar-item-add-record .jtable-toolbar-item-text").text("@PlantQuar.WEB.Language.Resource_data1.Add");
            });

        $('#shift').click(function (e) { $('.nav-tabs > .active').next('li').find('a').trigger('click'); });
        //getIStotal






        </script>
        <script>


        function reply_click2(element) {

            $(".toggle-div2-" + element.id + "").toggle('fast', "linear");

        }

        function reply_click4(element) {

            $(".toggle-div4-" + element.id + "").toggle('fast', "linear");

        }
        function reply_click5(element) {
            $(".toggle-div5-" + element.id + "").toggle('fast', "linear");
                          @*$.ajax(
                {
                    url: '@Url.Action("AnalysisLab_AddEDIT", "AnalysisType", new { area = "DE_Analysis" })',
                    type: 'Post',
                    success: function (data) {
                        $('.AnalysisLabLst1').empty();

                        $.each(data.Options, function (i, index) {


                            $('.AnalysisLabLst1').append($('<option />').val(index.Value).text(index.DisplayText));

                        }); //each
                    } //success
                  });//ajax
                   $.ajax(
                {
                    url: '@Url.Action("AnalysisType_AddEDIT", "AnalysisType", new { area = "DE_Analysis" })',
                    type: 'Post',
                    success: function (data) {
                        $('.AnalysisLst1').empty();

                        $.each(data.Options, function (i, index) {


                            $('.AnalysisLst1').append($('<option />').val(index.Value).text(index.DisplayText));

                        }); //each
                    } //success
                 });//ajax*@
        }
        function reply_click6(element) {

            $(".toggle-div6-" + element.id + "").toggle('fast', "linear");

        }
        @*$('.AnalysisLst').on("change", function () {
            var id = $(this).attr('id');
            $.ajax(
                {
                    url: '@Url.Action("AnalysisLab_List", "AnalysisType", new { area = "DE_Analysis" })',
                    type: 'Post',
                    data: { AnalysisTypeId: $('#'+id).val() },
                    success: function (data) {
                        $('.AnalysisLabLst').empty();
                        $.each(data.Options, function (i, index) {
                            $('.AnalysisLabLst').append($('<option />').val(index.Value).text(index.DisplayText));
                        }); //each
                    } //success
                });//ajax
              });*@

        function reply_click7(element) {

            $(".toggle-div7-" + element.id + "").toggle('fast', "linear");
            var Item_ID = element.name;

            var Analysisstr_GetName = $("#Analysisstr_" + Item_ID + " option:selected").text();// $('#Analysiss_name').innerHTML.text;
            var Analysisstr_GetID = $("#Analysisstr_" + Item_ID + " option:selected").val();


            var Analysis_Lab_GetName = $("#AnalysisLabLstr_" + Item_ID + " option:selected").text();
            var Analysis_Lab_GetID = $("#AnalysisLabLstr_" + Item_ID + " option:selected").val();

            var rows = document.getElementById("myAnlysesTable_Data_" + Item_ID + "").rows;

            var id = 0;
            if (Analysisstr_GetID > 0) {
                if (Analysis_Lab_GetID > 0) {
                    for (var i = 0, ceiling = rows.length; i < ceiling; i++) {
                        // alert(rows.length);
                        cells = rows[i].getElementsByTagName('td');
                        var id_cells = cells[3].innerHTML;
                        if (Analysis_Lab_GetID == id_cells) {
                            id = 1;
                        }

                    }
                    if (id == 0) {
                        var table = document.getElementById("myAnlysesTable_Data_" + Item_ID + "");
                        if (Analysisstr_GetID != 0) {

                            var rowCount = table.rows.length;
                            var row = table.insertRow(rowCount);


                            row.id = 'Analysisstr_GetID' + element.value;
                            row.insertCell(0).innerHTML = Analysisstr_GetName;
                            row.insertCell(1).innerHTML = Analysisstr_GetID;

                            row.insertCell(2).innerHTML = Analysis_Lab_GetName;
                            row.insertCell(3).innerHTML = Analysis_Lab_GetID;//2
                            //row.insertCell(4).innerHTML = Item_ID;//4
                            //row.insertCell(2).innerHTML =
                            //    '<td></td>';
                            //row.insertCell(4).innerHTML =
                            //    '<td><a href="#" onclick="DeleteRow(this)" name="asdasd">Delete</a></td>';
                            CheckedAnalysisList.push({
                                AnalysisLabType_ID: Analysis_Lab_GetID
                                , Im_Request_Item_Id: Item_ID
                            });
                            alertify.success("تمت الاضافه ");

                        } else {
                            alertify.error("اختار التحاليل");
                        }
                    }
                    else {
                        alertify.error("التحليل موجود مسبقا");
                    }
                }
                 else {
                    alertify.error("يجب اختيار معمل");
                }
            }
             else {
                    alertify.error("يجب اختيار تحليل");
                }
        }

        //حفظ موقف اللوط
        function reply_Insert_Lot_Result(element) {
            var Btn_Item_ID = element.name;
            var Radios_1 = document.querySelectorAll('input[type=radio]:checked');
            if (Radios_1.length > 0) {
                for (var i = 0; i < Radios_1.length; i++)   //to full CheckedItemsList
                {
                    var TotalORPart = Radios_1[i].value.split('_')[0];
                    var Radio_Item_ID = Radios_1[i].value.split('_')[1];
                    if (Btn_Item_ID == Radio_Item_ID) {
                        var IS_Status;
                        if (TotalORPart == 1) {
                            IS_Status = true;
                        }
                        else {

                           IS_Status = false;
                        }
                        var Nots = document.getElementById("Txt_Nots_" + Btn_Item_ID).value;
                            $.ajax(
                                {
                                    url: '@Url.Action("Insert_Lot_Result", "ImCommittee_Final_Result", new { area = "Committees" })',
                                    type: 'Post',
                                    data: { Lot_Category_ID: Btn_Item_ID,IS_Status:IS_Status,Nots:Nots },
                                    success: function (data) {
                                        alertify.success("تمت الاضافة بنجاح");
                                        $("#Txt_Nots_" + Btn_Item_ID).attr('disabled', 'disabled');
                                        $("#Insert_Lot_Result_" + Btn_Item_ID).attr('disabled', 'disabled');
                                        //var sa = "Insert_Lot_Result_" + Btn_Item_ID;
                                        //alert(sa);
                                        //$(sa).hide();
                                        //$(sa).prop('disabled', true); // Unchecks it
                                        $("#radio_Accept_"+ Btn_Item_ID).attr('disabled', 'disabled');
                                        $("#radio_Reject_"+ Btn_Item_ID).attr('disabled', 'disabled');
                                            //prop('disabled', true);

                                    } //success
                                });//ajax

                    }
                    else {
                        alertify.error("يجب التحديد من نفس اللوط ");
                    }
                }


            }
            else {
                alertify.error("يجب تحديد النتيجة ");
            }
        }

        //التأشيرة
        function reply_Insert_Visa(element) {
            var Visa_ID = document.getElementById("Visa_Lst").value;
            var Visa_Name = $('#Visa_Lst :selected').text();
            var _fullnameID = $('#fullnameID').val();

            var today = new Date();
            var date = today.getDate() + '/' + (today.getMonth() + 1) + '/' + today.getFullYear();

            var InsertVisa = true;
            var rows = document.getElementById("myTable2").rows;

            for (var i = 0, ceiling = rows.length; i < ceiling; i++) {

                cells = rows[i].getElementsByTagName('td');
                Tab_Visa_Name = cells[0].innerHTML;

                if (Tab_Visa_Name == Visa_Name) {
                    InsertVisa = false;
                }
            }
            if (InsertVisa == true) {
                if (Visa_ID > 0) {
                    $.ajax(
                        {
                            url: '@Url.Action("Insert_Im_CheckRequest_Visa", "ImCommittee_Final_Result", new { area = "Committees" })',
                            type: 'Post',
                            data: { Visa_ID: Visa_ID },
                            success: function (data) {
                                alertify.success("تمت الاضافة بنجاح");
                                $("#Tab_Visa tbody").append("<tr><td>" + Visa_Name + "</td><td>" + date + "</td><td>" + _fullnameID + "</td></tr>");
                            } //success
                        });//ajax
                }
                else {
                    alertify.error("يجب تحديد التأشيرة ");
                }
            }
            else {
                    alertify.error("التأشيرة موجودة مسبقا");
                }
        }

        //موقف نهائى للطلب
        function reply_Insert_Final_Result(element) {
            var FinalResultList = document.getElementById("FinalResultList").value;
            var _FinalResult = $('#FinalResult :selected').text();
            var _fullnameID = $('#fullnameID').val();
            var FinalResultList_Name = $('#FinalResultList :selected').text();
            var today = new Date();
            var date = today.getDate() + '/' + (today.getMonth() + 1) + '/' + today.getFullYear();


            var InsertFinalResult = true;
            var rows = document.getElementById("myTable3").rows;

            for (var i = 0, ceiling = rows.length; i < ceiling; i++) {

                cells = rows[i].getElementsByTagName('td');
                Tab_FinalResult_Name = cells[3].innerHTML;
                if (Tab_FinalResult_Name == FinalResultList_Name) {
                    InsertFinalResult = false;
                }
            }
            if (InsertFinalResult == true) {
               if (FinalResultList > 0) {
                $.ajax(
                    {
                        url: '@Url.Action("Insert_Im_CheckRequest_Final_Result", "ImCommittee_Final_Result", new { area = "Committees" })',
                        type: 'Post',
                        data: { Im_Final_Result_ID: FinalResultList },
                        success: function (data) {
                            alertify.success("تمت الاضافة بنجاح");

                            $("#TblFinalResult tbody").append("<tr>" +
                                "<td>" + _fullnameID + "</td><td>" + date + "</td><td>" + _FinalResult + "</td>"+ "<td>" + FinalResultList_Name + "</td>" + "</tr>");
                            //}); //each
                        } //success
                    });//ajax
            }
                else {
                    alertify.error("يجب تحديد موقف الطلب");
                }
            }
            else {
                    alertify.error("موقف الطلب موجود مسبقا");
                }
        }


        </script>
    }
    <script>
     $(".quickview1").click(function () {


         var netweight = $(this).data("netweight");
             var grossweight = $(this).data("grossweight");
         var packagecount = $(this).data("packagecount");
         if (packagecount == null || packagecount == 0 || packagecount == '') {
             packagecount = '#####'
         }
         var packageweight = $(this).data("packageweight");
         if (packageweight == null || packageweight == 0 || packageweight == '') {
             packageweight = '#####'
         }
                  var number_wooden_package = $(this).data("number_wooden_package");
         if (number_wooden_package == null || number_wooden_package == 0 || number_wooden_package == '') {
             number_wooden_package = '#####'
         }
         var ordertext = $(this).data("ordertext");
         if (ordertext == null || ordertext == 0 || ordertext == '') {
             ordertext = '#####'
         }
         //var navigationalfluidnumber = $(this).data("navigationalfluidnumber");
         var packagetype = $(this).data("packagetype");
         if (packagetype == null || packagetype == 0 || packagetype == '') {
             packagetype = '#####'
         }
         var reasonentry = $(this).data("reasonentry");
         if (reasonentry == null || reasonentry == 0 || reasonentry == '') {
             reasonentry = '#####'
         }
         var size = $(this).data("size");
         if (size == null || size == 0 || size == '') {
             size = '#####'
         }
         var basedweight = $(this).data("basedweight");
         var itemcat = $(this).data("itemcat");
         if (itemcat == null || itemcat == 0 || itemcat == '') {
             itemcat = '#####'
         }
         var itemcatgroup = $(this).data("itemcatgroup");
         if (itemcatgroup == null || itemcatgroup == 0 || itemcatgroup == '') {
             itemcatgroup = '#####'
         }
         var pckgematerial = $(this).data("pckgematerial");
         if (pckgematerial == null || pckgematerial == 0 || pckgematerial == '') {
             pckgematerial = '#####'
         }
         var packagebasedweight = $(this).data("packagebasedweight");

         if (packagebasedweight == null || packagebasedweight == 0 || packagebasedweight == '')
         {
             packagebasedweight = '#####'
         }
         var packagenetweight = $(this).data("packagenetweight");

         if (packagenetweight == null || packagenetweight == 0 || packagenetweight == '')
         {
             packagenetweight = '#####'
         }
         var unitsnumber = $(this).data("unitsnumber");
         var subpartname = '';
         if (unitsnumber == null || unitsnumber == 0 || unitsnumber == '') {
             unitsnumber = '#####'

         }
         else {
         var subpartname = $(this).data("subpartname");

             if (subpartname == null || subpartname == 0 || subpartname == '') {
                 subpartname = '#####'
             }
         }

         var shipmentpolicynumber = $(this).data("shipmentpolicynumber");
         if (shipmentpolicynumber == null || shipmentpolicynumber == 0 || shipmentpolicynumber == '') {
             shipmentpolicynumber = '#####'
         }
         var _grower_number = $(this).data("grower_number");
         if (_grower_number == null || _grower_number == 0 || _grower_number == '') {
             _grower_number = '#####'
         }
         var recorded = $(this).data("recorded");
         if (recorded == null || recorded == 0 || recorded == '') {
             recorded = '#####'
         }




         @**@

         $("#modaldetails").empty();
         //  $("#modaldetails").append("<table id='popup'><tr><td>@PlantQuar.WEB.Language.Resource_data1.PackageCount</td><td><span class='modalspan'> " + packagecount + "</span></td><td>سبب الدخول   </td><td><span class='modalspan'> " + reasonentry + "</span></td></tr><tr><td> @PlantQuar.WEB.Language.Resource_data1.PackageWeight</td><td><span class='modalspan'> " + packageweight + "</span><span class='red'>كجم</span></td><td>@PlantQuar.WEB.Language.Resource_data1.PackageType</td><td><span class='modalspan'> " + packagetype + "</span></td></tr><tr><td> @PlantQuar.WEB.Language.Resource_data1.PackageMaterial</td><td><span class='modalspan'> " + pckgematerial + "</span></td><td>@PlantQuar.WEB.Language.Resource_data1.PackageWeight</td><td><span class='modalspan'> " + packagebasedweight + "</span></td></tr><tr><td> @PlantQuar.WEB.Language.Resource_data1.Size</td><td><span class='modalspan'> " + size + "</span></td><td>@PlantQuar.WEB.Language.Resource_data1.order_text</td><td><span class='modalspan'> " + ordertext + "</span></td></tr><tr><td> @PlantQuar.WEB.Language.Resource_data1.ItemsCategoryGrp</td><td><span class='modalspan'> " + itemcatgroup + "</span></td><td>الرقم الملاحي</td><td><span class='modalspan'> " + navigationalfluidnumber + "</span></td></tr><tr><td>@PlantQuar.WEB.Language.Resource_data1.PackageNetWeight </td><td>" + packagenetweight + "</td><tr><td>@PlantQuar.WEB.Language.Resource_data1.Units_Number </td><td>" + unitsnumber + "</td><td>رقم بوليصة الشحن</td><td>" + shipmentpolicynumber + "</td></tr></tr></table>");
         $("#modaldetails").append("<table id='popup'><tr><td>@PlantQuar.WEB.Language.Resource_data1.PackageType</td><td><span class='modalspan'> " + packagetype + "</span></td><td> @PlantQuar.WEB.Language.Resource_data1.PackageMaterial</td><td><span class='modalspan'> " + pckgematerial + "</span></td></tr><tr><td>@PlantQuar.WEB.Language.Resource_data1.PackageCount</td><td><span class='modalspan'> " + packagecount + "</span><span class='red'>عبوة</span></td><td>الوزن القائم للعبوة</td><td><span class='modalspan'> " + packagebasedweight + "</span><span class='red'>كجم</span></td></tr><tr><td> الوزن الصافي للعبوة	</td><td><span class='modalspan'> " + packageweight + "</span><span class='red'>كجم</span></td><td>الوزن العبوة الفارغ	</td><td><span class='modalspan'> " + packagenetweight + "</span><span class='red'>كجم</span></td></tr><tr><td> الوزن الاجمالي للوط 	</td><td><span class='modalspan'> " + grossweight + "</span><span class='red'>كجم</span></td><td>الوزن الصافي للوط 	</td><td><span class='modalspan'> " + netweight + "</span><span class='red'>كجم</span></td></tr><tr><td>  عدد الوحدات </span></td><td>" + unitsnumber + "<span class='red'>"+subpartname+"</span></td><td>  حجم الرسالة </td> <td>" + size + "[م³]</td> </tr><tr><td>@PlantQuar.WEB.Language.Resource_data1.order_text</td><td><span class='modalspan'> " + ordertext + "</span></td><td>رقم بوليصة الشحن</td><td><span class='modalspan'>" + shipmentpolicynumber + "</span></td></tr><tr><td>سبب الدخول   </td><td><span class='modalspan'> " + reasonentry + "</span></td><td>رقم المزارع</td><td><span class='modalspan'> " + _grower_number + "</span></td></tr><tr><td>المجموعة الصنفية</td><td><span class='modalspan'> " + itemcatgroup + "</span></td><td>مسجل/غير مسجل</td><td><span class='modalspan'> " + recorded + "</span></td></tr><tr><td>الصنف الزراعي/السلالة</td><td><span class='modalspan'> " + itemcat + "</span></td><td>واحدت التعبئة الخشبية</td><td><span class='modalspan'> " + number_wooden_package + "</span></td></tr></table>");
           //  $("#modaldetails").append("<table><tr><td> @PlantQuar.WEB.Language.Resource_data1.LotNumber</td><td><span class='modalspan'> " + lotnumber + "</span></td><td>@PlantQuar.WEB.Language.Resource_data1.CategoryName</td><td><span class='modalspan'> " + categoryname + "</span></td></tr><tr><td> @PlantQuar.WEB.Language.Resource_data1.LotNumber</td><td><span class='modalspan'> " + lotnumber + "</span></td><td>@PlantQuar.WEB.Language.Resource_data1.CategoryName</td><td><span class='modalspan'> " + categoryname + "</span></td></tr><tr><td> @PlantQuar.WEB.Language.Resource_data1.LotNumber</td><td><span class='modalspan'> " + lotnumber + "</span></td><td>@PlantQuar.WEB.Language.Resource_data1.CategoryName</td><td><span class='modalspan'> " + categoryname + "</span></td></tr><tr><td> @PlantQuar.WEB.Language.Resource_data1.LotNumber</td><td><span class='modalspan'> " + lotnumber + "</span></td><td>@PlantQuar.WEB.Language.Resource_data1.CategoryName</td><td><span class='modalspan'> " + categoryname + "</span></td></tr><tr><td> @PlantQuar.WEB.Language.Resource_data1.LotNumber</td><td><span class='modalspan'> " + lotnumber + "</span></td><td>@PlantQuar.WEB.Language.Resource_data1.CategoryName</td><td><span class='modalspan'> " + categoryname + "</span></td></tr><tr><td> @PlantQuar.WEB.Language.Resource_data1.LotNumber</td><td><span class='modalspan'> " + lotnumber + "</span></td><td>@PlantQuar.WEB.Language.Resource_data1.CategoryName</td><td><span class='modalspan'> " + categoryname + "</span></td></tr></table>");

     });



    $(".quickview2").click(function () {

        var outLetname = $(this).data("outname");
        //    alert(outle)
        var _ContainerNumber = $(this).data("containernumber");
        var qualitive = $(this).data("qualitive");
        var _InitiatorCountry = $(this).data("initiator");
        var itemName = $(this).data("itemsn");
        var gweight = $(this).data("gweight");
        var nweight = $(this).data("nweight");
        var pmatrial = $(this).data("pmatrial");
        var ptype = $(this).data("ptype");
        var packcount = $(this).data("packcount");
        var pweight = $(this).data("pweight");
        var Based_Weight = $(this).data("baseweight");
        var Check_Lot_Old_Name = $(this).data("oldlot");
        var categoryname = $(this).data("catname");
        var unitcount = $(this).data("unitcount");
        var ordertext = $(this).data("ordertext");

        $("#modaldetails").empty();
        // $("#modaldetails").append("<table id='popup'><tbody><tr><td>@PlantQuar.WEB.Language.Resource_data1.Outlet</td><td> " + outLetname + "</td><td>@PlantQuar.WEB.Language.Resource_data1.NumberofContainers</td><td> " + _ContainerNumber + " </td> </tr><tr> <td>السيل الملاحي</td><td>4545</td> <td>رقم العنبر</td><td>54</td> </tr><tr><tr> <td>طريقة التعبئة</td><td>عبوات</td><td>وزن وحدة الشحن</td><td>2.00</td> </tr><tr> </tbody> </table>")
        $("#modaldetails").append("<table id='popup'><tbody><tr><td>@PlantQuar.WEB.Language.Resource_data1.Outlet</td><td> " + outLetname + "</td><td>@PlantQuar.WEB.Language.Resource_data1.NumberofContainers</td><td> " + _ContainerNumber + "</td></tr><tr><td>@PlantQuar.WEB.Language.Resource_data1.Qualitative_GroupName</td><td> " + qualitive + "</td><td>الاسم المختصر</td><td> " + itemName + "</td></tr><tr><td>@PlantQuar.WEB.Language.Resource_data1.CategoryName</td><td> " + categoryname + "</td><td>@PlantQuar.WEB.Language.Resource_data1.InitiatorCountry</td><td> " + _InitiatorCountry + "</td></tr><tr><td>GrossWeight</td><td> " + gweight + "</td><td>@PlantQuar.WEB.Language.Resource_data1.NetWeight</td><td> " + nweight + "</td></tr><tr><td>@PlantQuar.WEB.Language.Resource_data1.PackageMaterial</td><td> " + pmatrial + "</td><td>@PlantQuar.WEB.Language.Resource_data1.PackageType</td><td> " + ptype + "</td></tr><tr><td>@PlantQuar.WEB.Language.Resource_data1.Package_Count</td><td> " + packcount + "</td><td>@PlantQuar.WEB.Language.Resource_data1.PackageWeight</td><td> " + pweight + "</td></tr><tr><td>@PlantQuar.WEB.Language.Resource_data1.NetWeight</td><td> " + Based_Weight + "</td><td>@PlantQuar.WEB.Language.Resource_data1.Units_Number</td><td> " + unitcount + "</td></tr><tr><td>@PlantQuar.WEB.Language.Resource_data1.order_text</td><td> " + ordertext + "</td><td>Check_Lot_Old_Name</td><td> " + Check_Lot_Old_Name + "</td></tr> </tbody> </table>")
    });

    $(".quickview3").click(function () {


        var _ContainerNumber = $(this).data("containernumber");
        var contid = $(this).data("contid");
        var containers_type_ID = $(this).data("containerstypeid");
        var shipholdnumber = $(this).data("shipholdnumber");
        var NavigationalNumber = $(this).data("navigationalnumber");
        var Total_Weight = $(this).data("totalweight");


        $("#modaldetails").empty();
        $("#modaldetails").append("<table id='popup'><tbody><tr><td>وحدة الشحن</td><td> " + contid
            + "</td><td>رقم وحدة الشحن</td><td> " + _ContainerNumber
            + " </td> </tr><tr> <td>السيل الملاحي</td><td>" + NavigationalNumber
            + "</td> <td>رقم العنبر</td><td>" + shipholdnumber
            + "</td> </tr><tr><tr> <td>طريقة التعبئة</td><td>" + containers_type_ID
            + "</td><td>وزن وحدة الشحن</td><td>" + Total_Weight + "</span><span class='red'>كجم</span>"
            + "</td> </tr><tr> </tbody> </table>")
    });

    $(".quickview4").click
        (function () {


            var _delegationdate = $(this).data("delegationdate");
        var _ContainerNumber = $(this).data("employeeid");
        var _starttime = $(this).data("starttime");
        var _endtime = $(this).data("endtime");
        var _Notes = $(this).data("notes");
        var _employeename = $(this).data("employeename");
        var Total_Weight = $(this).data("totalweight");


        $("#modaldetails").empty();
            $("#modaldetails").append("<table id='popup'><tbody><tr><td>تاريخ اللجنة</td><td>" + _delegationdate+"</td></tr><tr><td>وقت البدايه</td><td> " + _starttime
            + "</td><td>وقت النهايه</td><td> " + _endtime
            + "</td> </tr><tr><td>اسم الادمن</td><td>" + _employeename
            + "</td><td>رقم الادمن</td><td>" + _ContainerNumber
            + "</td></tr><tr><td>ملاحظات الادمن</td><td>"+_Notes+"</td> </tr> </tbody> </table>")
    });
    $(".quickview5").click(function () {
        var _SampleSize = $(this).data("samplesize");
        var _samplesatio = $(this).data("samplesatio");
        var _withdrawdate = $(this).data("withdrawdate");
        var _employeename = $(this).data("employeename");

        var _notes = $(this).data("notes");
        var _sylaLkhatimanumber = $(this).data("sylalkhatimanumber");

        $("#modaldetails").empty();
        $("#modaldetails").append("<table id='popup'><tbody><tr><td>حجم العينه</td><td> " + _SampleSize
            + "</td><td>نسبة العينة</td><td> " + _samplesatio
            + " </td> </tr><tr> <td>وقت السحب</td><td>" + _withdrawdate
            + "</td> <td>اسم الادمن</td><td>" + _employeename
            + "</td></tr><tr> <td>الملاحظات</td><td> " + _notes
            + "</td> <td>السير الملاحى</td><td>" + _sylaLkhatimanumber
            + "</td> </tr></tbody> </table>")
    });
        $(".quickview6").click(function () {
        var itemname = $(this).data("itemname");
        var mainname = $(this).data("mainname");
        var secondaryname = $(this).data("secondaryname");
        var groupname = $(this).data("groupname");
            var kingdomname = $(this).data("kingdomname");
            var Phylumsubphylumname = $(this).data("phylumsub");


        var ordername = $(this).data("ordername");
        var famliyname = $(this).data("famliyname");
        var description = $(this).data("description");
        var scientificname = $(this).data("scientificname");
        var isplantegypt = $(this).data("isplantegypt");

        var isforbidden = $(this).data("isforbidden");

        var isforbiddenreason = $(this).data("isforbiddenreason");

        var isknownitem = $(this).data("isknownitem");

        var picture = $(this).data("picture");

        $("#modaldetails").empty();
        $("#modaldetails").append("<table id='popup'><tbody><tr> <td>المملكة </td><td>" + kingdomname
            + "</td><td>الشعبة/الصف</td> <td>" + Phylumsubphylumname+"</td> </tr><tr><tr> <td>الرتبة </td><td>" + ordername
            + "</td><td> العائلة </td><td>" + famliyname
            + "</td> </tr><tr><tr> <td> الاسم</td><td>" + itemname
            + "</td><td>الاسم العلمي</td><td>" + scientificname
            + "</td> </tr><tr><tr> <td>الوصف</td><td>" + description
            + "</td><td>توجد/لاتوجد فى ج.م.ع</td><td>" + isplantegypt
            + "</td> </tr><tr><tr> <td>حالة المنع</td><td>" + isforbidden
            + "</td><td>سبب المنع</td><td>" + isforbiddenreason
            + "</td> </tr><tr><tr><td colspan='6'> <img width='100px' src=../../" + picture + "> </td> </tr><tr> </tbody> </table>")
    });

    $(".quickview7").click(function () {


        var picture = $(this).data("picture");

        $("#modaldetails").empty();
        $("#modaldetails").append("<table id='popup'><tbody><tr><td><img width='100px' src=" + picture + "> </td> </tr></tbody> </table>")



    });

    $('.Show_Imge').click(function () {

        var path = $(this).data('id');
        window.open('/Im_CheckRequestDetails/GetReport?path1=' + path + '', "_blank");
        //var id = $(this).data("id");
        //alert(id)
        //var fees = $("#i_" + id).val();
        //$.post('/Im_CheckRequests/Im_CheckRequestDetails/saveItemFees', { itemId: id, fees: fees }, function (data, succ) {

        //});

    });
    </script>


